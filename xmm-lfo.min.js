!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.xmmLfo=e()}}(function(){return function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return n(r?r:e)},c,c.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),a=n(o),s=e("babel-runtime/helpers/classCallCheck"),l=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),f=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(f),p=e("babel-runtime/helpers/inherits"),d=n(p),m=e("waves-lfo"),b=i(m),_=e("xmm-client"),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,t);var r={model:void 0,likelihoodWindow:1,callback:void 0},i=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r,e));return i._decoder=new _.GmmDecoder(i.params.likelihoodWindow),i._results=null,i._callback=i.params.callback,i}return(0,d.default)(t,e),(0,c.default)(t,[{key:"process",value:function(e,t,r){var i=this;this.time=e,this.metaData=r,this._decoder.filter(t,function(e,t){if(null==e){i._results=t;for(var r=0;r<i._decoder.nbClasses;r++)i.outFrame[r]=t.likelihoods[r];i._callback&&i._callback(t)}i.output()})}},{key:"model",set:function(e){this._decoder.model=e,this.initialize({frameSize:this._decoder.nbClasses})}},{key:"likelihoodWindow",set:function(e){this._decoder.likelihoodWindow=e}},{key:"filterResults",get:function(){return this._results}}]),t}(b.core.BaseLfo);r.default=v},{"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22,"waves-lfo":138,"xmm-client":177}],2:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),a=n(o),s=e("babel-runtime/helpers/classCallCheck"),l=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),f=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(f),p=e("babel-runtime/helpers/inherits"),d=n(p),m=e("waves-lfo"),b=i(m),_=e("assert"),v=(n(_),e("xmm-client")),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,t);var r={model:void 0,likelihoodWindow:1,ctx:void 0,callback:void 0},i=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r,e));return i._decoder=new v.HhmmDecoder(i.params.likelihoodWindow),i._results=null,i._callback=i.params.callback,i}return(0,d.default)(t,e),(0,c.default)(t,[{key:"process",value:function(e,t,r){var i=this;this.time=e,this.metaData=r,this._decoder.filter(t,function(e,t){if(null==e){i._results=t;for(var r=0;r<i._decoder.nbClasses;r++)i.outFrame[r]=t.likelihoods[r];i._callback&&i._callback(t)}else console.error(e);i.output()})}},{key:"model",set:function(e){this._decoder.model=e,this.initialize({frameSize:this._decoder.nbClasses})}},{key:"likelihoodWindow",set:function(e){this._decoder.likelihoodWindow=e}},{key:"filterResults",get:function(){return this._results}}]),t}(b.core.BaseLfo);r.default=g},{assert:5,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22,"waves-lfo":138,"xmm-client":177}],3:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),a=n(o),s=e("babel-runtime/core-js/object/assign"),l=n(s),u=e("babel-runtime/helpers/classCallCheck"),c=n(u),f=e("babel-runtime/helpers/createClass"),h=n(f),p=e("babel-runtime/helpers/possibleConstructorReturn"),d=n(p),m=e("babel-runtime/helpers/get"),b=n(m),_=e("babel-runtime/helpers/inherits"),v=n(_),g=e("waves-lfo"),y=i(g),w=e("xmm-client"),k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.default)(this,t);var r={separateArrays:!0,bimodal:!1,dimension_input:0,column_names:[""]};(0,l.default)(r,e);var i=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));return i._phraseMaker=new w.PhraseMaker(i.params),i.updatePhrase=function(e){for(var t in e.data){var r=[];for(var n in e.data[t])r.push(e.data[t][n]);i._phraseMaker.addObservation(r)}i.retrieve().then(i.updatePhrase.bind(i)).catch(function(e){return console.error(e.stack)})},i.retrieve().then(i.updatePhrase.bind(i)).catch(function(e){return console.error(e.stack)}),i}return(0,v.default)(t,e),(0,h.default)(t,[{key:"start",value:function(){(0,b.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"start",this).call(this)}},{key:"stop",value:function(){(0,b.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"stop",this).call(this),this._phraseMaker.reset()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,b.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"initialize",this).call(this,e),this._phraseMaker.config={dimension:this.streamParams.frameSize},this._phraseMaker.reset()}},{key:"getRecordedPhrase",value:function(){return this._phraseMaker.phrase}},{key:"label",get:function(){return this.phraseMaker.config.label},set:function(e){this._phraseMaker.config={label:e}}}]),t}(y.sinks.DataRecorder);r.default=k},{"babel-runtime/core-js/object/assign":9,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22,"waves-lfo":138,"xmm-client":177}],4:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./GmmDecoderLfo");Object.defineProperty(r,"GmmDecoderLfo",{enumerable:!0,get:function(){return i(n).default}});var o=e("./HhmmDecoderLfo");Object.defineProperty(r,"HhmmDecoderLfo",{enumerable:!0,get:function(){return i(o).default}});var a=e("./PhraseRecorderLfo");Object.defineProperty(r,"PhraseRecorderLfo",{enumerable:!0,get:function(){return i(a).default}})},{"./GmmDecoderLfo":1,"./HhmmDecoderLfo":2,"./PhraseRecorderLfo":3}],5:[function(e,t,r){function i(e,t){return p.isUndefined(t)?""+t:p.isNumber(t)&&!isFinite(t)?t.toString():p.isFunction(t)||p.isRegExp(t)?t.toString():t}function n(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function o(e){return n(JSON.stringify(e.actual,i),128)+" "+e.operator+" "+n(JSON.stringify(e.expected,i),128)}function a(e,t,r,i,n){throw new b.AssertionError({message:r,actual:e,expected:t,operator:i,stackStartFunction:n})}function s(e,t){e||a(e,!0,t,"==",b.ok)}function l(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?c(e,t):e==t}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(p.isPrimitive(e)||p.isPrimitive(t))return e===t;var r=u(e),i=u(t);if(r&&!i||!r&&i)return!1;if(r)return e=d.call(e),t=d.call(t),l(e,t);var n,o,a=_(e),s=_(t);if(a.length!=s.length)return!1;for(a.sort(),s.sort(),o=a.length-1;o>=0;o--)if(a[o]!=s[o])return!1;for(o=a.length-1;o>=0;o--)if(n=a[o],!l(e[n],t[n]))return!1;return!0}function f(e,t){return!(!e||!t)&&("[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t||t.call({},e)===!0)}function h(e,t,r,i){var n;p.isString(r)&&(i=r,r=null);try{t()}catch(e){n=e}if(i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),e&&!n&&a(n,r,"Missing expected exception"+i),!e&&f(n,r)&&a(n,r,"Got unwanted exception"+i),e&&n&&r&&!f(n,r)||!e&&n)throw n}var p=e("util/"),d=Array.prototype.slice,m=Object.prototype.hasOwnProperty,b=t.exports=s;b.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var t=e.stackStartFunction||a;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var i=r.stack,n=t.name,s=i.indexOf("\n"+n);if(s>=0){var l=i.indexOf("\n",s+1);i=i.substring(l+1)}this.stack=i}}},p.inherits(b.AssertionError,Error),b.fail=a,b.ok=s,b.equal=function(e,t,r){e!=t&&a(e,t,r,"==",b.equal)},b.notEqual=function(e,t,r){e==t&&a(e,t,r,"!=",b.notEqual)},b.deepEqual=function(e,t,r){l(e,t)||a(e,t,r,"deepEqual",b.deepEqual)},b.notDeepEqual=function(e,t,r){l(e,t)&&a(e,t,r,"notDeepEqual",b.notDeepEqual)},b.strictEqual=function(e,t,r){e!==t&&a(e,t,r,"===",b.strictEqual)},b.notStrictEqual=function(e,t,r){e===t&&a(e,t,r,"!==",b.notStrictEqual)},b.throws=function(e,t,r){h.apply(this,[!0].concat(d.call(arguments)))},b.doesNotThrow=function(e,t){h.apply(this,[!1].concat(d.call(arguments)))},b.ifError=function(e){if(e)throw e};var _=Object.keys||function(e){var t=[];for(var r in e)m.call(e,r)&&t.push(r);return t}},{"util/":135}],6:[function(e,t,r){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":26}],7:[function(e,t,r){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":27}],8:[function(e,t,r){t.exports={default:e("core-js/library/fn/number/is-integer"),__esModule:!0}},{"core-js/library/fn/number/is-integer":28}],9:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":29}],10:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":30}],11:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":31}],12:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":32}],13:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":33}],14:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":34}],15:[function(e,t,r){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":35}],16:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":36}],17:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":37}],18:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],19:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var n=e("../core-js/object/define-property"),o=i(n);r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}()},{"../core-js/object/define-property":11}],20:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var n=e("../core-js/object/get-prototype-of"),o=i(n),a=e("../core-js/object/get-own-property-descriptor"),s=i(a);r.default=function e(t,r,i){null===t&&(t=Function.prototype);var n=(0,s.default)(t,r);if(void 0===n){var a=(0,o.default)(t);return null===a?void 0:e(a,r,i)}if("value"in n)return n.value;var l=n.get;if(void 0!==l)return l.call(i)}},{"../core-js/object/get-own-property-descriptor":12,"../core-js/object/get-prototype-of":13}],21:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var n=e("../core-js/object/set-prototype-of"),o=i(n),a=e("../core-js/object/create"),s=i(a),l=e("../helpers/typeof"),u=i(l);r.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":10,"../core-js/object/set-prototype-of":14,"../helpers/typeof":23}],22:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var n=e("../helpers/typeof"),o=i(n);r.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":23}],23:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var n=e("../core-js/symbol/iterator"),o=i(n),a=e("../core-js/symbol"),s=i(a),l="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default?"symbol":typeof e};r.default="function"==typeof s.default&&"symbol"===l(o.default)?function(e){return"undefined"==typeof e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default?"symbol":"undefined"==typeof e?"undefined":l(e)}},{"../core-js/symbol":16,"../core-js/symbol/iterator":17}],24:[function(e,t,r){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return 3*e.length/4-i(e)}function o(e){var t,r,n,o,a,s,l=e.length;a=i(e),s=new f(3*l/4-a),n=a>0?l-4:l;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[u++]=o>>16&255,s[u++]=o>>8&255,s[u++]=255&o;return 2===a?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[u++]=255&o):1===a&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[u++]=o>>8&255,s[u++]=255&o),s}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],n.push(a(i));return n.join("")}function l(e){for(var t,r=e.length,i=r%3,n="",o=[],a=16383,l=0,c=r-i;l<c;l+=a)o.push(s(e,l,l+a>c?c:l+a));return 1===i?(t=e[r-1],n+=u[t>>2],n+=u[t<<4&63],n+="=="):2===i&&(t=(e[r-2]<<8)+e[r-1],n+=u[t>>10],n+=u[t>>4&63],n+=u[t<<2&63],n+="="),o.push(n),o.join("")}r.byteLength=n,r.toByteArray=o,r.fromByteArray=l;for(var u=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)u[p]=h[p],c[h.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],25:[function(e,t,r){(function(t){"use strict";function i(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function n(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,r)}function s(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,r,i):"string"==typeof t?f(e,t,r):d(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,i){return l(t),t<=0?o(e,t):void 0!==r?"string"==typeof i?o(e,t).fill(r,i):o(e,t).fill(r):o(e,t)}function c(e,t){if(l(t),e=o(e,t<0?0:0|m(t)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(t,r);e=o(e,i);var n=e.write(t,r);return n!==i&&(e=e.slice(0,n)),e}function h(e,t){var r=t.length<0?0:0|m(t.length);e=o(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function p(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=h(e,t),e}function d(e,t){if(a.isBuffer(t)){var r=0|m(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||K(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&Q(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),a.alloc(+e)}function _(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(i)return H(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return z(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return E(this,t,r);case"base64":return M(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function y(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:w(e,t,r,i,n);if("number"==typeof t)return t=255&t,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,i,n){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}var u;if(n){var c=-1;for(u=r;u<s;u++)if(o(e,u)===o(t,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===l)return c*a}else c!==-1&&(u-=u-c),c=-1}else for(r+l>s&&(r=s-l),u=r;u>=0;u--){for(var f=!0,h=0;h<l;h++)if(o(e,u+h)!==o(t,h)){f=!1;break}if(f)return u}return-1}function k(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function j(e,t,r,i){return Z(H(t,e.length-r),e,r,i)}function C(e,t,r,i){return Z(G(t),e,r,i)}function x(e,t,r,i){return C(e,t,r,i)}function S(e,t,r,i){return Z(X(t),e,r,i)}function R(e,t,r,i){return Z(J(t,e.length-r),e,r,i)}function M(e,t,r){return 0===t&&r===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o=e[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s<=r){var l,u,c,f;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[n+1],128===(192&l)&&(f=(31&o)<<6|63&l,f>127&&(a=f));break;case 3:l=e[n+1],u=e[n+2],128===(192&l)&&128===(192&u)&&(f=(15&o)<<12|(63&l)<<6|63&u,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:l=e[n+1],u=e[n+2],c=e[n+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(f=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),n+=s}return A(i)}function A(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=ee));return r}function O(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function E(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function z(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=W(e[o]);return n}function T(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,r,i,n,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function B(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-r,2);n<o;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function D(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-r,4);n<o;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function L(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,i,n){return n||L(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,r,i,23,4),r+4}function N(e,t,r,i,n){return n||L(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,r,i,52,8),r+8}function Y(e){if(e=q(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var r,i=e.length,n=null,o=[],a=0;a<i;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function J(e,t){for(var r,i,n,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),i=r>>8,n=r%256,o.push(n),o.push(i);return o}function X(e){return V.toByteArray(Y(e))}function Z(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function K(e){return e!==e}var V=e("base64-js"),$=e("ieee754"),Q=e("isarray");r.Buffer=a,r.SlowBuffer=b,r.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),r.kMaxLength=n(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,r){return s(null,e,t,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,r){return u(null,e,t,r)},a.allocUnsafe=function(e){return c(null,e)},a.allocUnsafeSlow=function(e){return c(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=a.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},a.byteLength=_,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):v.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,i,n){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var o=n-i,s=r-t,l=Math.min(o,s),u=this.slice(i,n),c=e.slice(t,r),f=0;f<l;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},a.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(r)?(r=0|r,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return k(this,e,t,r);case"utf8":case"utf-8":return j(this,e,t,r);case"ascii":return C(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var i;if(a.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=a.prototype;else{var n=t-e;i=new a(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+e]}return i},a.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||F(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},a.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||F(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},a.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||F(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||F(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),$.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),$.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),$.read(this,e,!0,52,8);
},a.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),$.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t=0|t,r=0|r,!i){var n=Math.pow(2,8*r)-1;I(this,e,t,r,n,0)}var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t=0|t,r=0|r,!i){var n=Math.pow(2,8*r)-1;I(this,e,t,r,n,0)}var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t=0|t,!i){var n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},a.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t=0|t,!i){var n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,o=i-r;if(this===e&&r<t&&t<i)for(n=o-1;n>=0;--n)e[n+t]=this[n+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e=255&e);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:H(new a(e,i).toString()),l=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":24,ieee754:128,isarray:129}],26:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":45,"../../modules/es6.array.from":112,"../../modules/es6.string.iterator":123}],27:[function(e,t,r){var i=e("../../modules/_core"),n=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(e){return n.stringify.apply(n,arguments)}},{"../../modules/_core":45}],28:[function(e,t,r){e("../../modules/es6.number.is-integer"),t.exports=e("../../modules/_core").Number.isInteger},{"../../modules/_core":45,"../../modules/es6.number.is-integer":114}],29:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":45,"../../modules/es6.object.assign":115}],30:[function(e,t,r){e("../../modules/es6.object.create");var i=e("../../modules/_core").Object;t.exports=function(e,t){return i.create(e,t)}},{"../../modules/_core":45,"../../modules/es6.object.create":116}],31:[function(e,t,r){e("../../modules/es6.object.define-property");var i=e("../../modules/_core").Object;t.exports=function(e,t,r){return i.defineProperty(e,t,r)}},{"../../modules/_core":45,"../../modules/es6.object.define-property":117}],32:[function(e,t,r){e("../../modules/es6.object.get-own-property-descriptor");var i=e("../../modules/_core").Object;t.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},{"../../modules/_core":45,"../../modules/es6.object.get-own-property-descriptor":118}],33:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":45,"../../modules/es6.object.get-prototype-of":119}],34:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":45,"../../modules/es6.object.set-prototype-of":120}],35:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":45,"../modules/es6.object.to-string":121,"../modules/es6.promise":122,"../modules/es6.string.iterator":123,"../modules/web.dom.iterable":127}],36:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":45,"../../modules/es6.object.to-string":121,"../../modules/es6.symbol":124,"../../modules/es7.symbol.async-iterator":125,"../../modules/es7.symbol.observable":126}],37:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":109,"../../modules/es6.string.iterator":123,"../../modules/web.dom.iterable":127}],38:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],39:[function(e,t,r){t.exports=function(){}},{}],40:[function(e,t,r){t.exports=function(e,t,r,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(r+": incorrect invocation!");return e}},{}],41:[function(e,t,r){var i=e("./_is-object");t.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":66}],42:[function(e,t,r){var i=e("./_to-iobject"),n=e("./_to-length"),o=e("./_to-index");t.exports=function(e){return function(t,r,a){var s,l=i(t),u=n(l.length),c=o(a,u);if(e&&r!=r){for(;u>c;)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},{"./_to-index":101,"./_to-iobject":103,"./_to-length":104}],43:[function(e,t,r){var i=e("./_cof"),n=e("./_wks")("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),n))?r:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":44,"./_wks":110}],44:[function(e,t,r){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],45:[function(e,t,r){var i=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=i)},{}],46:[function(e,t,r){"use strict";var i=e("./_object-dp"),n=e("./_property-desc");t.exports=function(e,t,r){t in e?i.f(e,t,n(0,r)):e[t]=r}},{"./_object-dp":79,"./_property-desc":90}],47:[function(e,t,r){var i=e("./_a-function");t.exports=function(e,t,r){if(i(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,n){return e.call(t,r,i,n)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":38}],48:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],49:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":54}],50:[function(e,t,r){var i=e("./_is-object"),n=e("./_global").document,o=i(n)&&i(n.createElement);t.exports=function(e){return o?n.createElement(e):{}}},{"./_global":56,"./_is-object":66}],51:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],52:[function(e,t,r){var i=e("./_object-keys"),n=e("./_object-gops"),o=e("./_object-pie");t.exports=function(e){var t=i(e),r=n.f;if(r)for(var a,s=r(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},{"./_object-gops":84,"./_object-keys":87,"./_object-pie":88}],53:[function(e,t,r){var i=e("./_global"),n=e("./_core"),o=e("./_ctx"),a=e("./_hide"),s="prototype",l=function(e,t,r){var u,c,f,h=e&l.F,p=e&l.G,d=e&l.S,m=e&l.P,b=e&l.B,_=e&l.W,v=p?n:n[t]||(n[t]={}),g=v[s],y=p?i:d?i[t]:(i[t]||{})[s];p&&(r=t);for(u in r)c=!h&&y&&void 0!==y[u],c&&u in v||(f=c?y[u]:r[u],v[u]=p&&"function"!=typeof y[u]?r[u]:b&&c?o(f,i):_&&y[u]==f?function(e){var t=function(t,r,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,i)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):m&&"function"==typeof f?o(Function.call,f):f,m&&((v.virtual||(v.virtual={}))[u]=f,e&l.R&&g&&!g[u]&&a(g,u,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":45,"./_ctx":47,"./_global":56,"./_hide":58}],54:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],55:[function(e,t,r){var i=e("./_ctx"),n=e("./_iter-call"),o=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),l=e("./core.get-iterator-method"),u={},c={},r=t.exports=function(e,t,r,f,h){var p,d,m,b,_=h?function(){return e}:l(e),v=i(r,f,t?2:1),g=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(o(_)){for(p=s(e.length);p>g;g++)if(b=t?v(a(d=e[g])[0],d[1]):v(e[g]),b===u||b===c)return b}else for(m=_.call(e);!(d=m.next()).done;)if(b=n(m,v,d.value,t),b===u||b===c)return b};r.BREAK=u,r.RETURN=c},{"./_an-object":41,"./_ctx":47,"./_is-array-iter":63,"./_iter-call":67,"./_to-length":104,"./core.get-iterator-method":111}],56:[function(e,t,r){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],57:[function(e,t,r){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],58:[function(e,t,r){var i=e("./_object-dp"),n=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return i.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":49,"./_object-dp":79,"./_property-desc":90}],59:[function(e,t,r){t.exports=e("./_global").document&&document.documentElement},{"./_global":56}],60:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":49,"./_dom-create":50,"./_fails":54}],61:[function(e,t,r){t.exports=function(e,t,r){var i=void 0===r;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],62:[function(e,t,r){var i=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{"./_cof":44}],63:[function(e,t,r){var i=e("./_iterators"),n=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||o[n]===e)}},{"./_iterators":72,"./_wks":110}],64:[function(e,t,r){var i=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==i(e)}},{"./_cof":44}],65:[function(e,t,r){var i=e("./_is-object"),n=Math.floor;t.exports=function(e){return!i(e)&&isFinite(e)&&n(e)===e}},{"./_is-object":66}],66:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],67:[function(e,t,r){var i=e("./_an-object");t.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},{"./_an-object":41}],68:[function(e,t,r){"use strict";var i=e("./_object-create"),n=e("./_property-desc"),o=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=i(a,{next:n(1,r)}),o(e,t+" Iterator")}},{"./_hide":58,"./_object-create":78,"./_property-desc":90,"./_set-to-string-tag":95,"./_wks":110}],69:[function(e,t,r){"use strict";var i=e("./_library"),n=e("./_export"),o=e("./_redefine"),a=e("./_hide"),s=e("./_has"),l=e("./_iterators"),u=e("./_iter-create"),c=e("./_set-to-string-tag"),f=e("./_object-gpo"),h=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",m="keys",b="values",_=function(){return this};t.exports=function(e,t,r,v,g,y,w){u(r,t,v);var k,j,C,x=function(e){if(!p&&e in P)return P[e];switch(e){case m:return function(){return new r(this,e)};case b:return function(){return new r(this,e)}}return function(){return new r(this,e)}},S=t+" Iterator",R=g==b,M=!1,P=e.prototype,A=P[h]||P[d]||g&&P[g],O=A||x(g),E=g?R?x("entries"):O:void 0,z="Array"==t?P.entries||A:A;if(z&&(C=f(z.call(new e)),C!==Object.prototype&&(c(C,S,!0),i||s(C,h)||a(C,h,_))),R&&A&&A.name!==b&&(M=!0,O=function(){return A.call(this)}),i&&!w||!p&&!M&&P[h]||a(P,h,O),l[t]=O,l[S]=_,g)if(k={values:R?O:x(b),keys:y?O:x(m),entries:E},w)for(j in k)j in P||o(P,j,k[j]);else n(n.P+n.F*(p||M),t,k);return k}},{"./_export":53,"./_has":57,"./_hide":58,"./_iter-create":68,"./_iterators":72,"./_library":74,"./_object-gpo":85,"./_redefine":92,"./_set-to-string-tag":95,"./_wks":110}],70:[function(e,t,r){var i=e("./_wks")("iterator"),n=!1;try{var o=[7][i]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:r=!0}},o[i]=function(){return a},e(o)}catch(e){}return r}},{"./_wks":110}],71:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],72:[function(e,t,r){t.exports={}},{}],73:[function(e,t,r){var i=e("./_object-keys"),n=e("./_to-iobject");t.exports=function(e,t){for(var r,o=n(e),a=i(o),s=a.length,l=0;s>l;)if(o[r=a[l++]]===t)return r}},{"./_object-keys":87,"./_to-iobject":103}],74:[function(e,t,r){t.exports=!0},{}],75:[function(e,t,r){var i=e("./_uid")("meta"),n=e("./_is-object"),o=e("./_has"),a=e("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},h=function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},p=function(e){return u&&d.NEED&&l(e)&&!o(e,i)&&c(e),e},d=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},{"./_fails":54,"./_has":57,"./_is-object":66,"./_object-dp":79,"./_uid":107}],76:[function(e,t,r){var i=e("./_global"),n=e("./_task").set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==e("./_cof")(a);t.exports=function(){var e,t,r,u=function(){var i,n;for(l&&(i=a.domain)&&i.exit();e;){n=e.fn,e=e.next;try{n()}catch(i){throw e?r():t=void 0,i}}t=void 0,i&&i.enter()};if(l)r=function(){a.nextTick(u)};else if(o){var c=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(u)}}else r=function(){n.call(i,u)};return function(i){var n={fn:i,next:void 0};t&&(t.next=n),e||(e=n,r()),t=n}}},{"./_cof":44,"./_global":56,"./_task":100}],77:[function(e,t,r){"use strict";var i=e("./_object-keys"),n=e("./_object-gops"),o=e("./_object-pie"),a=e("./_to-object"),s=e("./_iobject"),l=Object.assign;t.exports=!l||e("./_fails")(function(){var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var r=a(e),l=arguments.length,u=1,c=n.f,f=o.f;l>u;)for(var h,p=s(arguments[u++]),d=c?i(p).concat(c(p)):i(p),m=d.length,b=0;m>b;)f.call(p,h=d[b++])&&(r[h]=p[h]);return r}:l},{"./_fails":54,"./_iobject":62,"./_object-gops":84,"./_object-keys":87,"./_object-pie":88,"./_to-object":105}],78:[function(e,t,r){var i=e("./_an-object"),n=e("./_object-dps"),o=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},l="prototype",u=function(){var t,r=e("./_dom-create")("iframe"),i=o.length,n="<",a=">";for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write(n+"script"+a+"document.F=Object"+n+"/script"+a),t.close(),u=t.F;i--;)delete u[l][o[i]];return u()};t.exports=Object.create||function(e,t){var r;return null!==e?(s[l]=i(e),r=new s,s[l]=null,r[a]=e):r=u(),void 0===t?r:n(r,t)}},{"./_an-object":41,"./_dom-create":50,"./_enum-bug-keys":51,"./_html":59,"./_object-dps":80,"./_shared-key":96}],79:[function(e,t,r){var i=e("./_an-object"),n=e("./_ie8-dom-define"),o=e("./_to-primitive"),a=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(i(e),t=o(t,!0),i(r),n)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":41,"./_descriptors":49,"./_ie8-dom-define":60,"./_to-primitive":106}],80:[function(e,t,r){var i=e("./_object-dp"),n=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){n(e);for(var r,a=o(t),s=a.length,l=0;s>l;)i.f(e,r=a[l++],t[r]);return e}},{"./_an-object":41,"./_descriptors":49,"./_object-dp":79,"./_object-keys":87}],81:[function(e,t,r){var i=e("./_object-pie"),n=e("./_property-desc"),o=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return n(!i.f.call(e,t),e[t])}},{"./_descriptors":49,"./_has":57,"./_ie8-dom-define":60,"./_object-pie":88,"./_property-desc":90,"./_to-iobject":103,"./_to-primitive":106}],82:[function(e,t,r){var i=e("./_to-iobject"),n=e("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return n(e)}catch(e){return a.slice()}};t.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):n(i(e))}},{"./_object-gopn":83,"./_to-iobject":103}],83:[function(e,t,r){var i=e("./_object-keys-internal"),n=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},{"./_enum-bug-keys":51,"./_object-keys-internal":86}],84:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],85:[function(e,t,r){var i=e("./_has"),n=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=n(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":57,"./_shared-key":96,"./_to-object":105}],86:[function(e,t,r){var i=e("./_has"),n=e("./_to-iobject"),o=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=n(e),l=0,u=[];for(r in s)r!=a&&i(s,r)&&u.push(r);for(;t.length>l;)i(s,r=t[l++])&&(~o(u,r)||u.push(r));return u}},{"./_array-includes":42,"./_has":57,"./_shared-key":96,"./_to-iobject":103}],87:[function(e,t,r){var i=e("./_object-keys-internal"),n=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return i(e,n)}},{"./_enum-bug-keys":51,"./_object-keys-internal":86}],88:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],89:[function(e,t,r){var i=e("./_export"),n=e("./_core"),o=e("./_fails");t.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],a={};a[e]=t(r),i(i.S+i.F*o(function(){r(1)}),"Object",a)}},{"./_core":45,"./_export":53,"./_fails":54}],90:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],91:[function(e,t,r){var i=e("./_hide");t.exports=function(e,t,r){for(var n in t)r&&e[n]?e[n]=t[n]:i(e,n,t[n]);return e}},{"./_hide":58}],92:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":58}],93:[function(e,t,r){var i=e("./_is-object"),n=e("./_an-object"),o=function(e,t){if(n(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,i){try{i=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),i(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return o(e,t),r?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:o}},{"./_an-object":41,"./_ctx":47,"./_is-object":66,"./_object-gopd":81}],94:[function(e,t,r){"use strict";var i=e("./_global"),n=e("./_core"),o=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof n[e]?n[e]:i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":45,"./_descriptors":49,"./_global":56,"./_object-dp":79,"./_wks":110}],95:[function(e,t,r){var i=e("./_object-dp").f,n=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},{"./_has":57,"./_object-dp":79,"./_wks":110}],96:[function(e,t,r){var i=e("./_shared")("keys"),n=e("./_uid");t.exports=function(e){return i[e]||(i[e]=n(e))}},{"./_shared":97,"./_uid":107}],97:[function(e,t,r){var i=e("./_global"),n="__core-js_shared__",o=i[n]||(i[n]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./_global":56}],98:[function(e,t,r){var i=e("./_an-object"),n=e("./_a-function"),o=e("./_wks")("species");t.exports=function(e,t){var r,a=i(e).constructor;return void 0===a||void 0==(r=i(a)[o])?t:n(r)}},{"./_a-function":38,"./_an-object":41,"./_wks":110}],99:[function(e,t,r){var i=e("./_to-integer"),n=e("./_defined");t.exports=function(e){return function(t,r){var o,a,s=String(n(t)),l=i(r),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):(o-55296<<10)+(a-56320)+65536)}}},{"./_defined":48,"./_to-integer":102}],100:[function(e,t,r){var i,n,o,a=e("./_ctx"),s=e("./_invoke"),l=e("./_html"),u=e("./_dom-create"),c=e("./_global"),f=c.process,h=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,m=0,b={},_="onreadystatechange",v=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},g=function(e){v.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return b[++m]=function(){s("function"==typeof e?e:Function(e),t)},i(m),m},p=function(e){delete b[e]},"process"==e("./_cof")(f)?i=function(e){f.nextTick(a(v,e,1))}:d?(n=new d,o=n.port2,n.port1.onmessage=g,i=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",g,!1)):i=_ in u("script")?function(e){l.appendChild(u("script"))[_]=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),t.exports={set:h,clear:p}},{"./_cof":44,"./_ctx":47,"./_dom-create":50,"./_global":56,"./_html":59,"./_invoke":61}],101:[function(e,t,r){var i=e("./_to-integer"),n=Math.max,o=Math.min;t.exports=function(e,t){return e=i(e),e<0?n(e+t,0):o(e,t)}},{"./_to-integer":102}],102:[function(e,t,r){var i=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},{}],103:[function(e,t,r){var i=e("./_iobject"),n=e("./_defined");t.exports=function(e){return i(n(e))}},{"./_defined":48,"./_iobject":62}],104:[function(e,t,r){var i=e("./_to-integer"),n=Math.min;t.exports=function(e){return e>0?n(i(e),9007199254740991):0}},{"./_to-integer":102}],105:[function(e,t,r){var i=e("./_defined");t.exports=function(e){return Object(i(e))}},{"./_defined":48}],106:[function(e,t,r){var i=e("./_is-object");t.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":66}],107:[function(e,t,r){var i=0,n=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},{}],108:[function(e,t,r){var i=e("./_global"),n=e("./_core"),o=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":45,"./_global":56,"./_library":74,"./_object-dp":79,"./_wks-ext":109}],109:[function(e,t,r){r.f=e("./_wks")},{"./_wks":110}],110:[function(e,t,r){var i=e("./_shared")("wks"),n=e("./_uid"),o=e("./_global").Symbol,a="function"==typeof o,s=t.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:n)("Symbol."+e))};s.store=i},{"./_global":56,"./_shared":97,"./_uid":107}],111:[function(e,t,r){var i=e("./_classof"),n=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||o[i(e)]}},{"./_classof":43,"./_core":45,"./_iterators":72,"./_wks":110}],112:[function(e,t,r){"use strict";var i=e("./_ctx"),n=e("./_export"),o=e("./_to-object"),a=e("./_iter-call"),s=e("./_is-array-iter"),l=e("./_to-length"),u=e("./_create-property"),c=e("./core.get-iterator-method");n(n.S+n.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,n,f,h=o(e),p="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,b=void 0!==m,_=0,v=c(h);if(b&&(m=i(m,d>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(t=l(h.length),r=new p(t);t>_;_++)u(r,_,b?m(h[_],_):h[_]);else for(f=v.call(h),r=new p;!(n=f.next()).done;_++)u(r,_,b?a(f,m,[n.value,_],!0):n.value);return r.length=_,r}})},{"./_create-property":46,"./_ctx":47,"./_export":53,"./_is-array-iter":63,"./_iter-call":67,"./_iter-detect":70,"./_to-length":104,"./_to-object":105,"./core.get-iterator-method":111}],113:[function(e,t,r){"use strict";var i=e("./_add-to-unscopables"),n=e("./_iter-step"),o=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,n(1)):"keys"==t?n(0,r):"values"==t?n(0,e[r]):n(0,[r,e[r]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},{"./_add-to-unscopables":39,"./_iter-define":69,"./_iter-step":71,"./_iterators":72,"./_to-iobject":103}],114:[function(e,t,r){var i=e("./_export");i(i.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":53,"./_is-integer":65}],115:[function(e,t,r){var i=e("./_export");i(i.S+i.F,"Object",{assign:e("./_object-assign")})},{"./_export":53,"./_object-assign":77}],116:[function(e,t,r){var i=e("./_export");i(i.S,"Object",{create:e("./_object-create")})},{"./_export":53,"./_object-create":78}],117:[function(e,t,r){var i=e("./_export");i(i.S+i.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":49,"./_export":53,"./_object-dp":79}],118:[function(e,t,r){var i=e("./_to-iobject"),n=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return n(i(e),t)}})},{"./_object-gopd":81,"./_object-sap":89,"./_to-iobject":103}],119:[function(e,t,r){var i=e("./_to-object"),n=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return n(i(e))}})},{"./_object-gpo":85,"./_object-sap":89,"./_to-object":105}],120:[function(e,t,r){var i=e("./_export");i(i.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":53,"./_set-proto":93}],121:[function(e,t,r){},{}],122:[function(e,t,r){"use strict";var i,n,o,a=e("./_library"),s=e("./_global"),l=e("./_ctx"),u=e("./_classof"),c=e("./_export"),f=e("./_is-object"),h=e("./_a-function"),p=e("./_an-instance"),d=e("./_for-of"),m=e("./_species-constructor"),b=e("./_task").set,_=e("./_microtask")(),v="Promise",g=s.TypeError,y=s.process,w=s[v],y=s.process,k="process"==u(y),j=function(){},C=!!function(){try{var t=w.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(j,j)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(j)instanceof r}catch(e){}}(),x=function(e,t){return e===t||e===w&&t===o},S=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},R=function(e){return x(w,e)?new M(e):new n(e)},M=n=function(e){var t,r;this.promise=new e(function(e,i){if(void 0!==t||void 0!==r)throw g("Bad Promise constructor");t=e,r=i}),this.resolve=h(t),this.reject=h(r)},P=function(e){try{e()}catch(e){return{error:e}}},A=function(e,t){if(!e._n){e._n=!0;var r=e._c;_(function(){for(var i=e._v,n=1==e._s,o=0,a=function(t){var r,o,a=n?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{a?(n||(2==e._h&&z(e),e._h=1),a===!0?r=i:(u&&u.enter(),r=a(i),u&&u.exit()),r===t.promise?l(g("Promise-chain cycle")):(o=S(r))?o.call(r,s,l):s(r)):l(i)}catch(e){l(e)}};r.length>o;)a(r[o++]);e._c=[],e._n=!1,t&&!e._h&&O(e)})}},O=function(e){b.call(s,function(){var t,r,i,n=e._v;if(E(e)&&(t=P(function(){k?y.emit("unhandledRejection",n,e):(r=s.onunhandledrejection)?r({promise:e,reason:n}):(i=s.console)&&i.error&&i.error("Unhandled promise rejection",n)}),e._h=k||E(e)?2:1),e._a=void 0,t)throw t.error})},E=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,i=0;r.length>i;)if(t=r[i++],t.fail||!E(t.promise))return!1;return!0},z=function(e){b.call(s,function(){var t;k?y.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},T=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),A(t,!0))},F=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw g("Promise can't be resolved itself");(t=S(e))?_(function(){var i={_w:r,_d:!1};try{t.call(e,l(F,i,1),l(T,i,1))}catch(e){T.call(i,e)}}):(r._v=e,r._s=1,A(r,!1))}catch(e){T.call({_w:r,_d:!1},e)}}};C||(w=function(e){p(this,w,v,"_h"),h(e),i.call(this);try{e(l(F,this,1),l(T,this,1))}catch(e){T.call(this,e)}},i=function(e){
this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=e("./_redefine-all")(w.prototype,{then:function(e,t){var r=R(m(this,w));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=k?y.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),M=function(){var e=new i;this.promise=e,this.resolve=l(F,e,1),this.reject=l(T,e,1)}),c(c.G+c.W+c.F*!C,{Promise:w}),e("./_set-to-string-tag")(w,v),e("./_set-species")(v),o=e("./_core")[v],c(c.S+c.F*!C,v,{reject:function(e){var t=R(this),r=t.reject;return r(e),t.promise}}),c(c.S+c.F*(a||!C),v,{resolve:function(e){if(e instanceof w&&x(e.constructor,this))return e;var t=R(this),r=t.resolve;return r(e),t.promise}}),c(c.S+c.F*!(C&&e("./_iter-detect")(function(e){w.all(e).catch(j)})),v,{all:function(e){var t=this,r=R(t),i=r.resolve,n=r.reject,o=P(function(){var r=[],o=0,a=1;d(e,!1,function(e){var s=o++,l=!1;r.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,r[s]=e,--a||i(r))},n)}),--a||i(r)});return o&&n(o.error),r.promise},race:function(e){var t=this,r=R(t),i=r.reject,n=P(function(){d(e,!1,function(e){t.resolve(e).then(r.resolve,i)})});return n&&i(n.error),r.promise}})},{"./_a-function":38,"./_an-instance":40,"./_classof":43,"./_core":45,"./_ctx":47,"./_export":53,"./_for-of":55,"./_global":56,"./_is-object":66,"./_iter-detect":70,"./_library":74,"./_microtask":76,"./_redefine-all":91,"./_set-species":94,"./_set-to-string-tag":95,"./_species-constructor":98,"./_task":100,"./_wks":110}],123:[function(e,t,r){"use strict";var i=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=i(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":69,"./_string-at":99}],124:[function(e,t,r){"use strict";var i=e("./_global"),n=e("./_has"),o=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),l=e("./_meta").KEY,u=e("./_fails"),c=e("./_shared"),f=e("./_set-to-string-tag"),h=e("./_uid"),p=e("./_wks"),d=e("./_wks-ext"),m=e("./_wks-define"),b=e("./_keyof"),_=e("./_enum-keys"),v=e("./_is-array"),g=e("./_an-object"),y=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),j=e("./_object-create"),C=e("./_object-gopn-ext"),x=e("./_object-gopd"),S=e("./_object-dp"),R=e("./_object-keys"),M=x.f,P=S.f,A=C.f,O=i.Symbol,E=i.JSON,z=E&&E.stringify,T="prototype",F=p("_hidden"),I=p("toPrimitive"),B={}.propertyIsEnumerable,D=c("symbol-registry"),L=c("symbols"),U=c("op-symbols"),N=Object[T],Y="function"==typeof O,q=i.QObject,W=!q||!q[T]||!q[T].findChild,H=o&&u(function(){return 7!=j(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,r){var i=M(N,t);i&&delete N[t],P(e,t,r),i&&e!==N&&P(N,t,i)}:P,G=function(e){var t=L[e]=j(O[T]);return t._k=e,t},J=Y&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},X=function(e,t,r){return e===N&&X(U,t,r),g(e),t=w(t,!0),g(r),n(L,t)?(r.enumerable?(n(e,F)&&e[F][t]&&(e[F][t]=!1),r=j(r,{enumerable:k(0,!1)})):(n(e,F)||P(e,F,k(1,{})),e[F][t]=!0),H(e,t,r)):P(e,t,r)},Z=function(e,t){g(e);for(var r,i=_(t=y(t)),n=0,o=i.length;o>n;)X(e,r=i[n++],t[r]);return e},K=function(e,t){return void 0===t?j(e):Z(j(e),t)},V=function(e){var t=B.call(this,e=w(e,!0));return!(this===N&&n(L,e)&&!n(U,e))&&(!(t||!n(this,e)||!n(L,e)||n(this,F)&&this[F][e])||t)},$=function(e,t){if(e=y(e),t=w(t,!0),e!==N||!n(L,t)||n(U,t)){var r=M(e,t);return!r||!n(L,t)||n(e,F)&&e[F][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=A(y(e)),i=[],o=0;r.length>o;)n(L,t=r[o++])||t==F||t==l||i.push(t);return i},ee=function(e){for(var t,r=e===N,i=A(r?U:y(e)),o=[],a=0;i.length>a;)!n(L,t=i[a++])||r&&!n(N,t)||o.push(L[t]);return o};Y||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===N&&t.call(U,r),n(this,F)&&n(this[F],e)&&(this[F][e]=!1),H(this,e,k(1,r))};return o&&W&&H(N,e,{configurable:!0,set:t}),G(e)},s(O[T],"toString",function(){return this._k}),x.f=$,S.f=X,e("./_object-gopn").f=C.f=Q,e("./_object-pie").f=V,e("./_object-gops").f=ee,o&&!e("./_library")&&s(N,"propertyIsEnumerable",V,!0),d.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!Y,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var te=R(p.store),re=0;te.length>re;)m(te[re++]);a(a.S+a.F*!Y,"Symbol",{for:function(e){return n(D,e+="")?D[e]:D[e]=O(e)},keyFor:function(e){if(J(e))return b(D,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!Y,"Object",{create:K,defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),E&&a(a.S+a.F*(!Y||u(function(){var e=O();return"[null]"!=z([e])||"{}"!=z({a:e})||"{}"!=z(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!J(e)){for(var t,r,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);return t=i[1],"function"==typeof t&&(r=t),!r&&v(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!J(t))return t}),i[1]=t,z.apply(E,i)}}}),O[T][I]||e("./_hide")(O[T],I,O[T].valueOf),f(O,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},{"./_an-object":41,"./_descriptors":49,"./_enum-keys":52,"./_export":53,"./_fails":54,"./_global":56,"./_has":57,"./_hide":58,"./_is-array":64,"./_keyof":73,"./_library":74,"./_meta":75,"./_object-create":78,"./_object-dp":79,"./_object-gopd":81,"./_object-gopn":83,"./_object-gopn-ext":82,"./_object-gops":84,"./_object-keys":87,"./_object-pie":88,"./_property-desc":90,"./_redefine":92,"./_set-to-string-tag":95,"./_shared":97,"./_to-iobject":103,"./_to-primitive":106,"./_uid":107,"./_wks":110,"./_wks-define":108,"./_wks-ext":109}],125:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":108}],126:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":108}],127:[function(e,t,r){e("./es6.array.iterator");for(var i=e("./_global"),n=e("./_hide"),o=e("./_iterators"),a=e("./_wks")("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=s[l],c=i[u],f=c&&c.prototype;f&&!f[a]&&n(f,a,u),o[u]=o.Array}},{"./_global":56,"./_hide":58,"./_iterators":72,"./_wks":110,"./es6.array.iterator":113}],128:[function(e,t,r){r.read=function(e,t,r,i,n){var o,a,s=8*n-i-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?n-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,i),o-=u}return(p?-1:1)*a*Math.pow(2,o-i)},r.write=function(e,t,r,i,n,o){var a,s,l,u=8*o-n-1,c=(1<<u)-1,f=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+f>=1?h/l:h*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,n),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,n),a=0));n>=8;e[r+p]=255&s,p+=d,s/=256,n-=8);for(a=a<<n|s,u+=n;u>0;e[r+p]=255&a,p+=d,a/=256,u-=8);e[r+p-d]|=128*m}},{}],129:[function(e,t,r){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],130:[function(e,t,r){"use strict";!function(e,t){function r(e){return e.forEach||(e.forEach=function(e){var t,r=this.length;for(t=0;t<r;t++)e(this[t],t,r)}),e}var i,n,o=Float32Array,a=Math.sqrt,s=function(e){return Math.pow(e,2)};e.isComplexArray=i=function(e){return e!==t&&e.hasOwnProperty!==t&&e.hasOwnProperty("real")&&e.hasOwnProperty("imag")},e.ComplexArray=n=function(e,t){i(e)?(this.ArrayType=e.ArrayType,this.real=new this.ArrayType(e.real),this.imag=new this.ArrayType(e.imag)):(this.ArrayType=t||o,this.real=new this.ArrayType(e),this.imag=new this.ArrayType(this.real.length)),this.length=this.real.length},n.prototype.toString=function(){var e=[];return this.forEach(function(t,r){e.push("("+t.real.toFixed(2)+","+t.imag.toFixed(2)+")")}),"["+e.join(",")+"]"},n.prototype.map=function(e){var t,r=this.length,i={};for(t=0;t<r;t++)i.real=this.real[t],i.imag=this.imag[t],e(i,t,r),this.real[t]=i.real,this.imag[t]=i.imag;return this},n.prototype.forEach=function(e){var t,r=this.length,i={};for(t=0;t<r;t++)i.real=this.real[t],i.imag=this.imag[t],e(i,t,r)},n.prototype.conjugate=function(){return new n(this).map(function(e){e.imag*=-1})},n.prototype.magnitude=function(){var e=new this.ArrayType(this.length);return this.forEach(function(t,r){e[r]=a(s(t.real)+s(t.imag))}),r(e)}}("undefined"==typeof r&&(this.complex_array={})||r)},{}],131:[function(e,t,r){"use strict";!function(e,t){function r(e){return t.isComplexArray(e)&&e||new u(e)}function i(e,t){var r=e.length;return r&r-1?n(e,t):o(e,t)}function n(e,t){var r,n,o,a,s,f,m,b,_,v,g,y,w,k,j=e.length;if(1===j)return e;for(o=new u(j,e.ArrayType),b=l(j),_=j/b,v=1/h(b),g=new u(_,e.ArrayType),n=0;n<b;n++){for(r=0;r<_;r++)g.real[r]=e.real[r*b+n],g.imag[r]=e.imag[r*b+n];for(_>1&&(g=i(g,t)),f=p(2*c*n/j),m=(t?-1:1)*d(2*c*n/j),a=1,s=0,r=0;r<j;r++)w=g.real[r%_],k=g.imag[r%_],o.real[r]+=a*w-s*k,o.imag[r]+=a*k+s*w,y=a*f-s*m,s=a*m+s*f,a=y}for(r=0;r<j;r++)e.real[r]=v*o.real[r],e.imag[r]=v*o.imag[r];return e}function o(e,t){var r,i,n,o,a,l,u,h,m,b,_,v,g,y,w,k,j,C=e.length;for(n=s(e),o=n.real,a=n.imag,j=1;j<C;){for(h=p(c/j),m=(t?-1:1)*d(c/j),r=0;r<C/(2*j);r++)for(l=1,u=0,i=0;i<j;i++)_=2*r*j+i,v=_+j,g=o[_],y=a[_],w=l*o[v]-u*a[v],k=u*o[v]+l*a[v],o[_]=f*(g+w),a[_]=f*(y+k),o[v]=f*(g-w),a[v]=f*(y-k),b=l*h-u*m,u=l*m+u*h,l=b;j<<=1}return n}function a(e,t){for(var r=0;t>1;)r<<=1,r+=1&e,e>>=1,t>>=1;return r}function s(e){var t,r,i=e.length,n={};for(r=0;r<i;r++){var o=a(r,i);n.hasOwnProperty(r)||n.hasOwnProperty(o)||(t=e.real[o],e.real[o]=e.real[r],e.real[r]=t,t=e.imag[o],e.imag[o]=e.imag[r],e.imag[r]=t,n[r]=n[o]=!0)}return e}function l(e){for(var t=3,r=h(e);t<=r;){if(e%t===0)return t;t+=2}return e}var u=t.ComplexArray,c=Math.PI,f=Math.SQRT1_2,h=Math.sqrt,p=Math.cos,d=Math.sin;u.prototype.FFT=function(){return i(this,!1)},e.FFT=function(e){return r(e).FFT()},u.prototype.InvFFT=function(){return i(this,!0)},e.InvFFT=function(e){return r(e).InvFFT()},u.prototype.frequencyMap=function(e){return this.FFT().map(e).InvFFT()},e.frequencyMap=function(e,t){return r(e).frequencyMap(t)}}("undefined"==typeof r&&(this.fft={})||r,"undefined"==typeof e&&this.complex_array||e("./complex_array"))},{"./complex_array":130}],132:[function(e,t,r){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===i||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){b&&d&&(b=!1,d.length?m=d.concat(m):_=-1,m.length&&l())}function l(){if(!b){var e=o(s);b=!0;for(var t=m.length;t;){for(d=m,m=[];++_<t;)d&&d[_].run();_=-1,t=m.length}d=null,b=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,h,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:i}catch(e){f=i}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(e){h=n}}();var d,m=[],b=!1,_=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new u(e,t)),1!==m.length||b||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],133:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],134:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],135:[function(e,t,r){(function(t,i){function n(e,t){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(t)?i.showHidden=t:t&&r._extend(i,t),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,e,i.depth)}function o(e,t){var r=n.styles[t];return r?"["+n.colors[r][0]+"m"+e+"["+n.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function l(e,t,i){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(i,e);return g(n)||(n=l(e,n,i)),n}var o=u(e,t);if(o)return o;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),x(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(S(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(C(t))return e.stylize(Date.prototype.toString.call(t),"date");if(x(t))return c(t)}var _="",v=!1,y=["{","}"];if(d(t)&&(v=!0,y=["[","]"]),S(t)){var w=t.name?": "+t.name:"";_=" [Function"+w+"]"}if(k(t)&&(_=" "+RegExp.prototype.toString.call(t)),C(t)&&(_=" "+Date.prototype.toUTCString.call(t)),x(t)&&(_=" "+c(t)),0===a.length&&(!v||0==t.length))return y[0]+_+y[1];if(i<0)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var j;return j=v?f(e,t,i,m,a):a.map(function(r){return h(e,t,i,m,r,v)}),e.seen.pop(),p(j,_,y)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return v(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,i,n){for(var o=[],a=0,s=t.length;a<s;++a)O(t,String(a))?o.push(h(e,t,r,i,String(a),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(h(e,t,r,i,n,!0))}),o}function h(e,t,r,i,n,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),O(i,n)||(a="["+n+"]"),s||(e.seen.indexOf(u.value)<0?(s=b(r)?l(e,u.value,null):l(e,u.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&n.match(/^\d+$/))return s;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,r){var i=0,n=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function b(e){return null===e}function _(e){return null==e}function v(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return"symbol"==typeof e}function w(e){return void 0===e}function k(e){return j(e)&&"[object RegExp]"===M(e)}function j(e){return"object"==typeof e&&null!==e}function C(e){return j(e)&&"[object Date]"===M(e)}function x(e){return j(e)&&("[object Error]"===M(e)||e instanceof Error)}function S(e){return"function"==typeof e}function R(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function M(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),F[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var E=/%[sdj%]/g;r.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,o=i.length,a=String(e).replace(E,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),s=i[r];r<o;s=i[++r])a+=b(s)||!j(s)?" "+s:" "+n(s);return a},r.deprecate=function(e,n){function o(){if(!a){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),a=!0}return e.apply(this,arguments)}if(w(i.process))return function(){return r.deprecate(e,n).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var z,T={};r.debuglog=function(e){if(w(z)&&(z=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!T[e])if(new RegExp("\\b"+e+"\\b","i").test(z)){var i=t.pid;T[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,i,t)}}else T[e]=function(){};return T[e]},r.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=m,r.isNull=b,r.isNullOrUndefined=_,r.isNumber=v,r.isString=g,r.isSymbol=y,r.isUndefined=w,r.isRegExp=k,r.isObject=j,r.isDate=C,r.isError=x,r.isFunction=S,r.isPrimitive=R,r.isBuffer=e("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!j(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":134,_process:132,inherits:133}],136:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/assign"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=0,f=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,s.default)(this,e),this.cid=c++,this.params={},this.streamParams={frameSize:1,frameRate:0,sourceSampleRate:0},this.params=(0,o.default)({},t,r),this.children=[],this.time=0,this.outFrame=null,this.metaData={}}return(0,u.default)(e,[{key:"connect",value:function(e){if(null===this.streamParams)throw new Error("cannot connect to a dead lfo node");this.children.push(e),e.parent=this}},{key:"disconnect",value:function(){var e=this.parent.children.indexOf(this);this.parent.children.splice(e,1)}},{key:"initialize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,o.default)(this.streamParams,e,t),this.setupStream();for(var r=0,i=this.children.length;r<i;r++)this.children[r].initialize(this.streamParams)}},{key:"setupStream",value:function(){var e=this.streamParams.frameSize;e>0&&(this.outFrame=new Float32Array(e))}},{key:"reset",value:function(){for(var e=0,t=this.children.length;e<t;e++)this.children[e].reset();if(this.outFrame)for(var r=0,i=this.outFrame.length;r<i;r++)this.outFrame[r]=0}},{key:"finalize",value:function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t].finalize(e)}},{key:"output",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?this.time:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.outFrame:arguments[1],r=arguments.length<=2||void 0===arguments[2]?this.metaData:arguments[2],i=0,n=this.children.length;i<n;i++)this.children[i].process(e,t,r)}},{key:"process",value:function(e,t,r){this.time=e,this.outFrame=t,this.metaData=r,this.output()}},{key:"destroy",value:function(){for(var e=this.children.length;e--;)this.children[e].destroy();if(this.parent){var t=this.parent.children.indexOf(this);this.parent.children.splice(t,1)}this.streamParams=null}}]),e}();r.default=f},{"babel-runtime/core-js/object/assign":9,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],137:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./base-lfo"),o=i(n);r.default={BaseLfo:o.default}},{"./base-lfo":136}],138:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./core");Object.defineProperty(r,"core",{enumerable:!0,get:function(){return i(n).default}});var o=e("./sources");Object.defineProperty(r,"sources",{enumerable:!0,get:function(){return i(o).default}});var a=e("./sinks");Object.defineProperty(r,"sinks",{enumerable:!0,get:function(){return i(a).default}});var s=e("./operators");Object.defineProperty(r,"operators",{enumerable:!0,get:function(){return i(s).default}})},{"./core":137,"./operators":142,"./sinks":156,"./sources":168}],139:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){var i=O*e,n=P(i)/(2*t),o=A(i),a=1/(1+n);r.a1=-2*o*a,r.a2=(1-n)*a,r.b0=.5*(1-o)*a,r.b1=(1-o)*a,r.b2=r.b0}function o(e,t,r){var i=O*e,n=P(i)/(2*t),o=A(i),a=1/(1+n);r.a1=-2*o*a,r.a2=(1-n)*a,r.b0=.5*(1+o)*a,r.b1=(-1-o)*a,r.b2=r.b0}function a(e,t,r){var i=O*e,n=P(i),o=n/(2*t),a=A(i),s=1/(1+o);r.a1=-2*a*s,r.a2=(1-o)*s,r.b0=.5*n*s,r.b1=0,r.b2=-r.b0}function s(e,t,r){var i=O*e,n=P(i)/(2*t),o=A(i),a=1/(1+n);r.a1=-2*o*a,r.a2=(1-n)*a,r.b0=n*a,r.b1=0,r.b2=-r.b0}function l(e,t,r){var i=O*e,n=P(i)/(2*t),o=A(i),a=1/(1+n);r.a1=-2*o*a,r.a2=(1-n)*a,r.b0=a,r.b1=r.a1,r.b2=r.b0}function u(e,t,r){var i=O*e,n=P(i)/(2*t),o=A(i),a=1/(1+n);r.a1=-2*o*a,r.a2=(1-n)*a,r.b0=r.a2,r.b1=r.a1,r.b2=1}function c(e,t,r,i){var n=E(r),o=1/n,a=O*e,s=P(a)/(2*t),l=A(a),u=1/(1+s*o);i.a1=-2*l*u,i.a2=(1-s*o)*u,i.b0=(1+s*n)*u,i.b1=i.a1,i.b2=(1-s*n)*u}function f(e,t,r,i){var n=E(r),o=O*e,a=P(o)*E(n)/t,s=A(o),l=1/(n+1+(n-1)*s+a);i.a1=-2*(n-1+(n+1)*s)*l,i.a2=(n+1+(n-1)*s-a)*l,i.b0=n*(n+1-(n-1)*s+a)*l,i.b1=2*n*(n-1-(n+1)*s)*l,i.b2=n*(n+1-(n-1)*s-a)*l}function h(e,t,r,i){var n=E(r),o=O*e,a=P(o)*E(n)/t,s=A(o),l=1/(n+1-(n-1)*s+a);i.a1=2*(n-1-(n+1)*s)*l,i.a2=(n+1-(n-1)*s-a)*l,i.b0=n*(n+1+(n-1)*s+a)*l,i.b1=-2*n*(n-1+(n+1)*s)*l,i.b2=n*(n+1+(n-1)*s-a)*l}function p(e,t,r,i,p){switch(e){case"lowpass":n(t,r,p);break;case"highpass":o(t,r,p);break;case"bandpass_constant_skirt":a(t,r,p);break;case"bandpass_constant_peak":s(t,r,p);break;case"notch":l(t,r,p);break;case"allpass":u(t,r,p);break;case"peaking":c(t,r,i,p);break;case"lowshelf":f(t,r,i,p);break;case"highshelf":h(t,r,i,p)}switch(e){case"lowpass":case"highpass":case"bandpass_constant_skirt":case"bandpass_constant_peak":case"notch":case"allpass":1!=i&&(p.b0*=i,p.b1*=i,p.b2*=i);break;case"peaking":case"lowshelf":case"highshelf":}}function d(e,t,r,i,n){for(var o=0;o<n;o++){var a=e.b0*r[o]+e.b1*t.xn_1[o]+e.b2*t.xn_2[o]-e.a1*t.yn_1[o]-e.a2*t.yn_2[o];i[o]=a,t.xn_2[o]=t.xn_1[o],t.xn_1[o]=r[o],t.yn_2[o]=t.yn_1[o],t.yn_1[o]=a}}Object.defineProperty(r,"__esModule",{value:!0});var m=e("babel-runtime/core-js/object/get-prototype-of"),b=i(m),_=e("babel-runtime/helpers/classCallCheck"),v=i(_),g=e("babel-runtime/helpers/createClass"),y=i(g),w=e("babel-runtime/helpers/possibleConstructorReturn"),k=i(w),j=e("babel-runtime/helpers/get"),C=i(j),x=e("babel-runtime/helpers/inherits"),S=i(x),R=e("../core/base-lfo"),M=i(R),P=Math.sin,A=Math.cos,O=Math.PI,E=Math.sqrt,z=function(e){function t(e){return(0,v.default)(this,t),(0,k.default)(this,(0,b.default)(t).call(this,{filterType:"lowpass",f0:1,gain:1,q:1},e))}return(0,S.default)(t,e),(0,y.default)(t,[{key:"initialize",value:function(e){(0,C.default)((0,b.default)(t.prototype),"initialize",this).call(this,e);var r=this.streamParams.frameRate;if(!r||r<=0)throw new Error("This Operator requires a frameRate higher than 0.");var i=this.params.f0/r,n=this.params.gain,o=void 0;this.params.q&&(o=this.params.q),this.params.bw&&(o=this.params.f0/this.params.bw),this.coefs={b0:0,b1:0,b2:0,a1:0,a2:0};var a=this.streamParams.frameSize;this.state={xn_1:new Float32Array(a),xn_2:new Float32Array(a),yn_1:new Float32Array(a),yn_2:new Float32Array(a)},p(this.params.filterType,i,o,n,this.coefs)}},{key:"process",value:function(e,t,r){d(this.coefs,this.state,t,this.outFrame,t.length),this.output(e,this.outFrame,r)}}]),t}(M.default);r.default=z},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],140:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=e("jsfft"),g=(i(v),e("jsfft/lib/complex_array")),y=i(g),w=e("../utils/fft-windows"),k=i(w),j=Math.sqrt,C=function(e){for(;e%2===0&&e>1;)e/=2;return 1===e},x=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{fftSize:1024,windowName:"hann",outType:"magnitude"},e));if(r.windowSize=r.params.fftSize,!C(r.params.fftSize))throw new Error("fftSize must be a power of two");return r}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(e){(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,e,{frameSize:this.params.fftSize/2+1});var r=e.frameSize,i=this.params.fftSize;this.windowSize=i,r<i&&(this.windowSize=r),this.normalizeCoefs={linear:0,power:0},this.window=new Float32Array(this.windowSize),this.complexFrame=new y.default.ComplexArray(i),(0,k.default)(this.params.windowName,this.window,this.windowSize,this.normalizeCoefs),this.windowedFrame=new Float32Array(i)}},{key:"process",value:function(e,t,r){for(var i=this,n=this.windowSize,o=this.streamParams.frameSize,a=this.params.fftSize,s=0;s<n;s++)this.windowedFrame[s]=t[s]*this.window[s];n<a&&this.windowedFrame.fill(0,n),this.complexFrame.map(function(e,t){e.real=i.windowedFrame[t],e.imag=0});var l=this.complexFrame.FFT(),u=1/a,c=l.real[0],f=l.imag[0];this.outFrame[0]=(c*c+f*f)*u;var h=l.real[a/2],p=l.imag[a/2];this.outFrame[a/2]=(h*h+p*p)*u;for(var d=1,m=a-1;d<a/2;d++,m--){var b=l.real[d]+l.real[m],_=l.imag[d]-l.imag[m];this.outFrame[d]=(b*b+_*_)*u}if("magnitude"===this.params.outType)for(var v=0;v<o;v++)this.outFrame[v]=j(this.outFrame[v]);this.output(e)}}]),t}(_.default);r.default=x},{"../core/base-lfo":136,"../utils/fft-windows":172,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22,jsfft:131,"jsfft/lib/complex_array":130}],141:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{frameSize:512,centeredTimeTag:!1},e));return r.frameIndex=0,r}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(e){this.params.hopSize||(this.params.hopSize=this.params.frameSize),(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,e,{frameSize:this.params.frameSize,frameRate:e.sourceSampleRate/this.params.hopSize})}},{key:"reset",value:function(){this.frameIndex=0,(0,p.default)((0,o.default)(t.prototype),"reset",this).call(this)}},{key:"finalize",value:function(e){this.frameIndex>0&&(this.outFrame.fill(0,this.frameIndex),this.output()),(0,p.default)((0,o.default)(t.prototype),"finalize",this).call(this,e)}},{key:"process",value:function(e,t,r){for(var i=this.outFrame,n=this.streamParams.sourceSampleRate,o=1/n,a=this.streamParams.frameSize,s=t.length,l=this.params.hopSize,u=this.frameIndex,c=0;c<s;){var f=0;if(u<0&&(f=-u),f<s){c+=f;var h=s-c,p=a-u;h>=p&&(h=p);var d=t.subarray(c,c+h);i.set(d,u),c+=h,u+=h,u===a&&(this.params.centeredTimeTag?this.time=e+(c-a/2)*o:this.time=e+(c-a)*o,this.metaData=r,this.output(),l<a&&i.set(i.subarray(l,a),0),u-=l)}else{var m=s-c;u+=m,c+=m}}this.frameIndex=u}}]),t}(_.default);r.default=v},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],142:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./biquad"),o=i(n),a=e("./fft"),s=i(a),l=e("./framer"),u=i(l),c=e("./magnitude"),f=i(c),h=e("./max"),p=i(h),d=e("./min-max"),m=i(d),b=e("./moving-average"),_=i(b),v=e("./moving-median"),g=i(v),y=e("./noop"),w=i(y),k=e("./operator"),j=i(k),C=e("./segmenter"),x=i(C);r.default={Biquad:o.default,Fft:s.default,Framer:u.default,Magnitude:f.default,Max:p.default,MinMax:m.default,MovingAverage:_.default,MovingMedian:g.default,Noop:w.default,Operator:j.default,Segmenter:x.default}},{"./biquad":139,"./fft":140,"./framer":141,"./magnitude":143,"./max":144,"./min-max":145,"./moving-average":146,"./moving-median":147,"./noop":148,"./operator":149,"./segmenter":150}],143:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,{normalize:!0,power:!1},e))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(e){(0,p.default)((0,
o.default)(t.prototype),"initialize",this).call(this,e,{frameSize:1})}},{key:"inputArray",value:function(e){for(var t=this.outFrame,r=e.length,i=0,n=0;n<r;n++)i+=e[n]*e[n];var o=i;return this.params.normalize&&(o/=r),this.params.power||(o=Math.sqrt(o)),t[0]=o,t}},{key:"process",value:function(e,t,r){this.inputArray(t),this.output(e,this.outFrame,r)}}]),t}(_.default);r.default=v},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],144:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,e))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(e){(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,e,{frameSize:1})}},{key:"process",value:function(e,t,r){this.time=e,this.outFrame[0]=Math.max.apply(null,t),this.metaData=r,this.output()}}]),t}(_.default);r.default=v},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],145:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,e))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(e){(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,e,{frameSize:2})}},{key:"process",value:function(e,t,r){for(var i=+(1/0),n=-(1/0),o=0,a=t.length;o<a;o++){var s=t[o];s<i&&(i=s),s>n&&(n=s)}this.time=e,this.outFrame[0]=i,this.outFrame[1]=n,this.metaData=r,this.output()}}]),t}(_.default);r.default=v},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],146:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{order:10,fill:0},e));return r.sum=null,r.ringBuffer=null,r.ringIndex=0,r}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(e){(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,e),this.ringBuffer=new Float32Array(this.params.order*this.streamParams.frameSize),this.streamParams.frameSize>1?this.sum=new Float32Array(this.streamParams.frameSize):this.sum=0}},{key:"reset",value:function(){(0,p.default)((0,o.default)(t.prototype),"reset",this).call(this),this.ringBuffer.fill(this.params.fill);var e=this.params.order*this.params.fill;this.streamParams.frameSize>1?this.sum.fill(e):this.sum=e,this.ringIndex=0}},{key:"inputScalar",value:function(e){var t=this.params.order,r=this.ringIndex,i=this.ringBuffer,n=this.sum;return n-=i[r],n+=e,this.sum=n,this.ringBuffer[r]=e,this.ringIndex=(r+1)%t,n/t}},{key:"inputArray",value:function(e){for(var t=this.outFrame,r=this.params.order,i=this.streamParams.frameSize,n=this.ringIndex,o=n*i,a=(this.ringBuffer,this.sum,1/r),s=0;s<i;s++){var l=o+s,u=e[s],c=c[s];c-=ringBuffer[l],c+=u,t[s]=c*a,this.sum[s]=c,this.ringBuffer[l]=u}return this.ringIndex=(n+1)%r,t}},{key:"process",value:function(e,t,r){this.frameSize>1?this.inputArray(t):this.outFrame[0]=this.inputScalar(t[0]),this.streamParams.sourceSampleRate&&(e-=.5*(this.params.order-1)/this.streamParams.sourceSampleRate),this.output(e,this.outFrame,r)}}]),t}(_.default);r.default=v},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],147:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/array/from"),o=i(n),a=e("babel-runtime/core-js/object/get-prototype-of"),s=i(a),l=e("babel-runtime/helpers/classCallCheck"),u=i(l),c=e("babel-runtime/helpers/createClass"),f=i(c),h=e("babel-runtime/helpers/possibleConstructorReturn"),p=i(h),d=e("babel-runtime/helpers/get"),m=i(d),b=e("babel-runtime/helpers/inherits"),_=i(b),v=e("../core/base-lfo"),g=i(v),y=function(e){function t(e){(0,u.default)(this,t);var r=(0,p.default)(this,(0,s.default)(t).call(this,{order:9},e));if(r.params.order%2===0)throw new Error("order must be an odd number");return r.queue=new Float32Array(r.params.order),r.sorter=[],r}return(0,_.default)(t,e),(0,f.default)(t,[{key:"reset",value:function(){(0,m.default)((0,s.default)(t.prototype),"reset",this).call(this);for(var e=0,r=this.queue.length;e<r;e++)this.queue[e]=0}},{key:"process",value:function(e,t,r){for(var i=this.outFrame,n=t.length,a=this.params.order,s=this.params.order-1,l=Math.floor(a/2),u=0;u<n;u++){var c=t[u];this.queue.set(this.queue.subarray(1),0),this.queue[s]=c,this.sorter=(0,o.default)(this.queue.values()),this.sorter.sort(function(e,t){return e-t}),i[u]=this.sorter[l]}this.output(e,i,r)}}]),t}(g.default);r.default=y},{"../core/base-lfo":136,"babel-runtime/core-js/array/from":6,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],148:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/inherits"),p=i(h),d=e("../core/base-lfo"),m=i(d),b=function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"process",value:function(e,t,r){this.outFrame.set(t,0),this.time=e,this.metaData=r,this.output()}}]),t}(m.default);r.default=b},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],149:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/inherits"),p=i(h),d=e("../core/base-lfo"),m=i(d),b=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,e));return r.params.type=r.params.type||"scalar",r.params.onProcess&&(r.callback=r.params.onProcess.bind(r)),r}return(0,p.default)(t,e),(0,u.default)(t,[{key:"configureStream",value:function(){"vector"===this.params.type&&this.params.frameSize&&(this.streamParams.frameSize=this.params.frameSize)}},{key:"process",value:function(e,t,r){if("vector"===this.params.type){var i=this.callback(e,t,this.outFrame);void 0!==i&&(e=i)}else for(var n=0,o=t.length;n<o;n++)this.outFrame[n]=this.callback(t[n],n);this.time=e,this.metaData=r,this.output()}}]),t}(m.default);r.default=b},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],150:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=e("./moving-average"),g=i(v),y=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{logInput:!1,minInput:1e-12,filterOrder:5,threshold:3,offThreshold:-(1/0),minInter:.05,maxDuration:1/0},e));r.insideSegment=!1,r.onsetTime=-(1/0),r.min=1/0,r.max=-(1/0),r.sum=0,r.sumOfSquares=0,r.count=0;var i=r.params.minInput,n=i;return r.params.logInput&&i>0&&(n=Math.log(i)),r.movingAverage=new g.default({order:r.params.filterOrder,fill:n}),r.lastMvavrg=n,r}return(0,m.default)(t,e),(0,u.default)(t,[{key:"resetSegment",value:function(){this.insideSegment=!1,this.onsetTime=-(1/0),this.min=1/0,this.max=-(1/0),this.sum=0,this.sumOfSquares=0,this.count=0}},{key:"outputSegment",value:function(e){this.outFrame[0]=e-this.onsetTime,this.outFrame[1]=this.min,this.outFrame[2]=this.max;var t=1/this.count,r=this.sum*t,i=this.sumOfSquares*t,n=r*r;this.outFrame[3]=r,this.outFrame[4]=0,i>n&&(this.outFrame[4]=Math.sqrt(i-n)),this.output(this.onsetTime)}},{key:"initialize",value:function(e){(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,e,{frameSize:5,description:["duration","min","max","mean","std dev"]}),this.movingAverage.initialize(e)}},{key:"reset",value:function(){(0,p.default)((0,o.default)(t.prototype),"reset",this).call(this),this.movingAverage.reset(),this.resetSegment()}},{key:"finalize",value:function(e){this.insideSegment&&this.outputSegment(e),(0,p.default)((0,o.default)(t.prototype),"finalize",this).call(this,e)}},{key:"process",value:function(e,t,r){var i=t[0],n=this.params.minInput,o=Math.max(i,n);this.params.logInput&&(o=Math.log(o));var a=o-this.lastMvavrg;this.lastMvavrg=this.movingAverage.inputScalar(o),this.metaData=r,a>this.params.threshold&&e-this.onsetTime>this.params.minInter&&(this.insideSegment&&this.outputSegment(e),this.insideSegment=!0,this.onsetTime=e,this.max=-(1/0)),this.insideSegment&&(this.min=Math.min(this.min,i),this.max=Math.max(this.max,i),this.sum+=i,this.sumOfSquares+=i*i,this.count++,(e-this.onsetTime>=this.params.maxDuration||o<=this.params.offThreshold)&&(this.outputSegment(e),this.insideSegment=!1))}},{key:"threshold",set:function(e){this.params.threshold=e}},{key:"offThreshold",set:function(e){this.params.offThreshold=e}}]),t}(_.default);r.default=y},{"../core/base-lfo":136,"./moving-average":146,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],151:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/promise"),o=i(n),a=e("babel-runtime/core-js/object/get-prototype-of"),s=i(a),l=e("babel-runtime/helpers/classCallCheck"),u=i(l),c=e("babel-runtime/helpers/createClass"),f=i(c),h=e("babel-runtime/helpers/possibleConstructorReturn"),p=i(h),d=e("babel-runtime/helpers/get"),m=i(d),b=e("babel-runtime/helpers/inherits"),_=i(b),v=e("../core/base-lfo"),g=i(v),y="\nvar isInfiniteBuffer = false;\nvar stack = [];\nvar buffer;\nvar bufferLength;\nvar currentIndex;\n\nfunction init() {\n  buffer = new Float32Array(bufferLength);\n  stack.length = 0;\n  currentIndex = 0;\n}\n\nfunction append(block) {\n  var availableSpace = bufferLength - currentIndex;\n  var currentBlock;\n  // return if already full\n  if (availableSpace <= 0) { return; }\n\n  if (availableSpace < block.length) {\n    currentBlock = block.subarray(0, availableSpace);\n  } else {\n    currentBlock = block;\n  }\n\n  buffer.set(currentBlock, currentIndex);\n  currentIndex += currentBlock.length;\n\n  if (isInfiniteBuffer && currentIndex === buffer.length) {\n    stack.push(buffer);\n\n    currentBlock = block.subarray(availableSpace);\n    buffer = new Float32Array(buffer.length);\n    buffer.set(currentBlock, 0);\n    currentIndex = currentBlock.length;\n  }\n}\n\nself.addEventListener('message', function(e) {\n  switch (e.data.command) {\n    case 'init':\n      if (isFinite(e.data.duration)) {\n        bufferLength = e.data.sampleRate * e.data.duration;\n      } else {\n        isInfiniteBuffer = true;\n        bufferLength = e.data.sampleRate * 10;\n      }\n\n      init();\n      break;\n\n    case 'process':\n      var block = new Float32Array(e.data.buffer);\n      append(block);\n\n\n      // if the buffer is full return it, only works with finite buffers\n      if (!isInfiniteBuffer && currentIndex === bufferLength) {\n        var buf = buffer.buffer.slice(0);\n        self.postMessage({ buffer: buf }, [buf]);\n        init();\n      }\n      break;\n\n    case 'stop':\n      if (!isInfiniteBuffer) {\n        // @TODO add option to not clip the returned buffer\n        // values in FLoat32Array are 4 bytes long (32 / 8)\n        var copy = buffer.buffer.slice(0, currentIndex * (32 / 8));\n        self.postMessage({ buffer: copy }, [copy]);\n      } else {\n        var copy = new Float32Array(stack.length * bufferLength + currentIndex);\n        stack.forEach(function(buffer, index) {\n          copy.set(buffer, bufferLength * index);\n        });\n\n        copy.set(buffer.subarray(0, currentIndex), stack.length * bufferLength);\n        self.postMessage({ buffer: copy.buffer }, [copy.buffer]);\n      }\n      init();\n      break;\n  }\n}, false)",w=void 0,k=function(e){function t(e){(0,u.default)(this,t);var r=(0,p.default)(this,(0,s.default)(t).call(this,{duration:10,ignoreLeadingZeros:!0},e));r.params.ctx?r.ctx=r.params.ctx:(w||(w=new window.AudioContext),r.ctx=w),r._isStarted=!1,r._ignoreZeros=!1;var i=new Blob([y],{type:"text/javascript"});return r.worker=new Worker(window.URL.createObjectURL(i)),r}return(0,_.default)(t,e),(0,f.default)(t,[{key:"initialize",value:function(e){(0,m.default)((0,s.default)(t.prototype),"initialize",this).call(this,e),this.worker.postMessage({command:"init",duration:this.params.duration,sampleRate:this.streamParams.sourceSampleRate})}},{key:"start",value:function(){this._isStarted=!0,this._ignoreZeros=this.params.ignoreLeadingZeros,this.count=0}},{key:"stop",value:function(){this._isStarted&&(this.worker.postMessage({command:"stop"}),this._isStarted=!1)}},{key:"finalize",value:function(e){this.stop()}},{key:"process",value:function(e,t,r){if(this._isStarted){var i=null;if(this._ignoreZeros){if(0!==t[t.length-1]){var n=t.length,o=void 0;for(o=0;o<n&&0===t[o];o++);i=new Float32Array(t.subarray(o)),this._ignoreZeros=!1}}else i=new Float32Array(t);if(i){var a=i.buffer;this.worker.postMessage({command:"process",buffer:a},[a])}}}},{key:"retrieve",value:function(){var e=this;return new o.default(function(t,r){var i=function r(i){e._isStarted=!1,e.worker.removeEventListener("message",r,!1);var n=new Float32Array(i.data.buffer),o=n.length,a=e.streamParams.sourceSampleRate,s=e.ctx.createBuffer(1,o,a),l=s.getChannelData(0);l.set(n,0),t(s)};e.worker.addEventListener("message",i,!1)})}}]),t}(g.default);r.default=k},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],152:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/core-js/object/assign"),s=i(a),l=e("babel-runtime/helpers/classCallCheck"),u=i(l),c=e("babel-runtime/helpers/createClass"),f=i(c),h=e("babel-runtime/helpers/possibleConstructorReturn"),p=i(h),d=e("babel-runtime/helpers/get"),m=i(d),b=e("babel-runtime/helpers/inherits"),_=i(b),v=e("../core/base-lfo"),g=i(v),y=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,u.default)(this,t);var i=(0,s.default)({duration:1,min:-1,max:1,width:300,height:150,isSynchronized:!1,canvas:null,container:null},e),n=(0,p.default)(this,(0,o.default)(t).call(this,i,r));if(!n.params.canvas&&!n.params.container)throw new Error("parameter `canvas` or `container` are mandatory");if(n.params.canvas)n.canvas=n.params.canvas;else if(n.params.container){var a=document.querySelector(n.params.container);n.canvas=document.createElement("canvas"),a.appendChild(n.canvas)}return n.ctx=n.canvas.getContext("2d"),n.cachedCanvas=document.createElement("canvas"),n.cachedCtx=n.cachedCanvas.getContext("2d"),n.previousTime=0,n.lastShiftError=0,n.currentPartialShift=0,n.resize(n.params.width,n.params.height),n._stack,n._rafId,n.draw=n.draw.bind(n),n}return(0,_.default)(t,e),(0,f.default)(t,[{key:"_setYScale",value:function(){var e=this.params.min,t=this.params.max,r=this.params.height,i=(0-r)/(t-e),n=r-i*e;this.getYPosition=function(e){return i*e+n}}},{key:"setupStream",value:function(){(0,m.default)((0,o.default)(t.prototype),"setupStream",this).call(this),this.previousFrame=new Float32Array(this.streamParams.frameSize)}},{key:"initialize",value:function(e){(0,m.default)((0,o.default)(t.prototype),"initialize",this).call(this,e),this._stack=[],this._rafId=requestAnimationFrame(this.draw)}},{key:"reset",value:function(){(0,m.default)((0,o.default)(t.prototype),"reset",this).call(this),this.ctx.clearRect(0,0,this.params.width,this.params.height),this.cachedCtx.clearRect(0,0,this.params.width,this.params.height)}},{key:"finalize",value:function(e){(0,m.default)((0,o.default)(t.prototype),"finalize",this).call(this,e),cancelAnimationFrame(this._rafId)}},{key:"process",value:function(e,t,r){var i=t.buffer.slice(0),n=new Float32Array(i);this._stack.push({time:e,frame:n,metaData:r})}},{key:"draw",value:function(){for(var e=0,t=this._stack.length;e<t;e++){var r=this._stack[e];this.executeDraw(r.time,r.frame)}this._stack.length=0,this._rafId=requestAnimationFrame(this.draw)}},{key:"executeDraw",value:function(e,t){this.scrollModeDraw(e,t)}},{key:"resize",value:function(e,t){var r=this.ctx,i=this.cachedCtx;this.params.width=e,this.params.height=t,r.canvas.width=i.canvas.width=e,r.canvas.height=i.canvas.height=t,i.clearRect(0,0,this.params.width,this.params.height),this._setYScale()}},{key:"scrollModeDraw",value:function(e,t){var r=this.ctx,i=this.params.width,n=this.params.height,o=this.params.duration,a=e-this.previousTime,s=a/o*i-this.lastShiftError,l=Math.round(s);this.lastShiftError=l-s;var u=l-this.currentPartialShift;this.shiftCanvas(u),this.params.isSynchronized&&this.synchronizer&&this.synchronizer.shiftSiblings(u,this),r.save(),r.translate(i,0),this.drawCurve(t,this.previousFrame,l),r.restore(),this.currentPartialShift-=l,this.cachedCtx.clearRect(0,0,i,n),this.cachedCtx.drawImage(this.canvas,0,0,i,n),this.previousFrame.set(t,0),this.previousTime=e}},{key:"shiftCanvas",value:function(e){var t=this.ctx,r=this.params.width,i=this.params.height;this.currentPartialShift+=e,t.clearRect(0,0,r,i),t.save();var n=r-this.currentPartialShift;t.drawImage(this.cachedCanvas,this.currentPartialShift,0,n,i,0,0,n,i),t.restore()}},{key:"drawCurve",value:function(e,t,r){console.error("must be implemented")}},{key:"duration",set:function(e){this.params.duration=e}},{key:"min",set:function(e){this.params.min=e,this._setYScale()}},{key:"max",set:function(e){this.params.max=e,this._setYScale()}}]),t}(g.default);r.default=y},{"../core/base-lfo":136,"babel-runtime/core-js/object/assign":9,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],153:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("./base-draw"),_=i(b),v=e("../utils/draw-utils"),g=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{trigger:!1,radius:0,line:!0},e));return r.currentXPosition=0,r}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(e){if((0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,e),!this.params.colors){this.params.colors=[];for(var r=0,i=this.streamParams.frameSize;r<i;r++)this.params.colors.push((0,v.getRandomColor)())}}},{key:"setTrigger",value:function(e){this.params.trigger=e,this.ctx.clearRect(0,0,this.params.width,this.params.height),this.cachedCtx.clearRect(0,0,this.params.width,this.params.height),this.currentXPosition=0,this.lastShiftError=0}},{key:"executeDraw",value:function(e,r){this.params.trigger?this.triggerModeDraw(e,r):this.scrollModeDraw(e,r),(0,p.default)((0,o.default)(t.prototype),"process",this).call(this,e,r)}},{key:"triggerModeDraw",value:function(e,t){var r=this.params.width,i=this.params.height,n=this.params.duration,o=this.ctx,a=e-this.previousTime,s=a/n*r-this.lastShiftError,l=Math.round(s);this.lastShiftError=l-s,this.currentXPosition+=l,o.save(),o.translate(this.currentXPosition,0),o.clearRect(-l,0,l,i),this.drawCurve(t,l),o.restore(),this.currentXPosition>r&&(this.currentXPosition-=r,o.save(),o.translate(this.currentXPosition,0),o.clearRect(-l,0,l,i),this.drawCurve(t,this.previousFrame,l),o.restore())}},{key:"drawCurve",value:function(e,t,r){for(var i=this.params.colors,n=this.ctx,o=this.params.radius,a=0,s=e.length;a<s;a++){n.save(),n.fillStyle=i[a],n.strokeStyle=i[a];var l=this.getYPosition(e[a]);if(o>0&&(n.beginPath(),n.arc(0,l,o,0,2*Math.PI,!1),n.fill(),n.closePath()),t&&this.params.line){var u=this.getYPosition(t[a]);n.beginPath(),n.moveTo(-r,u),n.lineTo(0,l),n.stroke(),n.closePath()}n.restore()}}}]),t}(_.default);r.default=g},{"../utils/draw-utils":171,"./base-draw":152,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],154:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=function(e){function t(e,r){(0,s.default)(this,t);var i=(0,f.default)(this,(0,o.default)(t).call(this,e));return i.process=r.bind(i),i.data=i.outFrame=[],i}return(0,m.default)(t,e),(0,u.default)(t,[{key:"setupStream",value:function(){(0,p.default)((0,o.default)(t.prototype),"setupStream",this).call(this),this.data.length=0}},{key:"reset",value:function(){this.data.length=0}}]),t}(_.default);r.default=v},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],155:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/promise"),o=i(n),a=e("babel-runtime/core-js/object/get-prototype-of"),s=i(a),l=e("babel-runtime/helpers/classCallCheck"),u=i(l),c=e("babel-runtime/helpers/createClass"),f=i(c),h=e("babel-runtime/helpers/possibleConstructorReturn"),p=i(h),d=e("babel-runtime/helpers/get"),m=i(d),b=e("babel-runtime/helpers/inherits"),_=i(b),v=e("../core/base-lfo"),g=i(v),y="\nvar _separateArrays = false;\nvar _data = [];\nvar _separateArraysData = { time: [], data: [] };\n\nfunction init() {\n  _data.length = 0;\n  _separateArraysData.time.length = 0;\n  _separateArraysData.data.length = 0;\n}\n\nfunction process(time, data) {\n  if (_separateArrays) {\n    _separateArraysData.time.push(time);\n    _separateArraysData.data.push(data);\n  } else {\n    var datum = { time: time, data: data };\n    _data.push(datum);\n  }\n}\n\nself.addEventListener('message', function(e) {\n  switch (e.data.command) {\n    case 'init':\n      _separateArrays = e.data.separateArrays;\n      init();\n      break;\n    case 'process':\n      var time = e.data.time;\n      var data = new Float32Array(e.data.buffer);\n      process(time, data);\n      break;\n    case 'stop':\n      var data = _separateArrays ? _separateArraysData : _data;\n      self.postMessage({ data: data });\n      init();\n      break;\n  }\n});\n",w=function(e){function t(e){(0,u.default)(this,t);var r=(0,p.default)(this,(0,s.default)(t).call(this,{separateArrays:!1},e));r._isStarted=!1;var i=new Blob([y],{type:"text/javascript"});return r.worker=new Worker(window.URL.createObjectURL(i)),r}return(0,_.default)(t,e),(0,f.default)(t,[{key:"initialize",value:function(e){(0,m.default)((0,s.default)(t.prototype),"initialize",this).call(this,e),this.worker.postMessage({command:"init",separateArrays:this.params.separateArrays})}},{key:"start",value:function(){this._isStarted=!0}},{key:"stop",value:function(){this._isStarted&&(this.worker.postMessage({command:"stop"}),this._isStarted=!1)}},{key:"finalize",value:function(){this.stop()}},{key:"process",value:function(e,t,r){if(this._isStarted){this.outFrame=new Float32Array(t);var i=this.outFrame.buffer;this.worker.postMessage({command:"process",time:e,buffer:i},[i])}}},{key:"retrieve",value:function(){var e=this;return new o.default(function(t,r){var i=function r(i){e._started=!1,e.worker.removeEventListener("message",r,!1),t(i.data.data)};e.worker.addEventListener("message",i,!1)})}}]),t}(g.default);r.default=w},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/core-js/promise":15,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],156:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./audio-recorder"),o=i(n),a=e("./bpf"),s=i(a),l=e("./bridge"),u=i(l),c=e("./data-recorder"),f=i(c),h=e("./marker"),p=i(h),d=e("./spectrogram"),m=i(d),b=e("./socket-client"),_=i(b),v=e("./socket-server"),g=i(v),y=e("./sonogram"),w=i(y),k=e("./synchronized-draw"),j=i(k),C=e("./trace"),x=i(C),S=e("./waveform"),R=i(S);r.default={AudioRecorder:o.default,Bpf:s.default,Bridge:u.default,DataRecorder:f.default,Marker:p.default,Spectrogram:m.default,SocketClient:_.default,SocketServer:g.default,Sonogram:w.default,SynchronizedDraw:j.default,Trace:x.default,Waveform:R.default}},{"./audio-recorder":151,"./bpf":153,"./bridge":154,"./data-recorder":155,"./marker":157,"./socket-client":158,"./socket-server":159,"./sonogram":160,"./spectrogram":161,"./synchronized-draw":162,"./trace":163,"./waveform":164}],157:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/inherits"),p=i(h),d=e("./base-draw"),m=i(d),b=e("../utils/draw-utils"),_=function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,{frameSize:1,color:(0,b.getRandomColor)(),threshold:0},e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"drawCurve",value:function(e,t,r){var i=(this.params.color,this.ctx),n=(i.height,e[0]);n>this.params.threshold&&(i.save(),i.strokeStyle=this.params.color,i.beginPath(),i.moveTo(-r,this.getYPosition(this.params.min)),i.lineTo(-r,this.getYPosition(this.params.max)),i.stroke(),i.closePath(),i.restore())}}]),t}(m.default);r.default=_},{"../utils/draw-utils":171,"./base-draw":152,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],158:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/inherits"),p=i(h),d=e("../core/base-lfo"),m=i(d),b=e("../utils/socket-utils"),_=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{port:3030,address:window.location.hostname},e));return r.socket=null,r.initConnection(),r}return(0,p.default)(t,e),(0,u.default)(t,[{key:"initConnection",value:function(){var e=this,t="ws://"+this.params.address+":"+this.params.port;this.socket=new WebSocket(t),this.socket.binaryType="arraybuffer",this.socket.onopen=function(){e.params.onopen()},this.socket.onclose=function(){},this.socket.onmessage=function(){},this.socket.onerror=function(e){console.error(e)}}},{key:"process",value:function(e,t,r){var i=(0,b.encodeMessage)(e,t,r);this.socket.send(i)}}]),t}(m.default);r.default=_},{"../core/base-lfo":136,"../utils/socket-utils":173,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],159:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;
var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),a=n(o),s=e("babel-runtime/helpers/classCallCheck"),l=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),f=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(f),p=e("babel-runtime/helpers/inherits"),d=n(p),m=e("../core/base-lfo"),b=n(m),_=e("ws"),v=i(_),g=e("../utils/socket-utils"),y=function(e){function t(e){(0,l.default)(this,t);var r=(0,h.default)(this,(0,a.default)(t).call(this,{port:3031},e));return r.server=null,r.initServer(),r}return(0,d.default)(t,e),(0,c.default)(t,[{key:"initServer",value:function(){this.server=new v.Server({port:this.params.port})}},{key:"process",value:function(e,t,r){var i=(0,g.encodeMessage)(e,t,r),n=(0,g.arrayBufferToBuffer)(i);this.server.clients.forEach(function(e){e.send(n)})}}]),t}(b.default);r.default=y},{"../core/base-lfo":136,"../utils/socket-utils":173,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22,ws:174}],160:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/inherits"),p=i(h),d=e("./base-draw"),m=i(d),b=(e("../utils/draw-utils"),function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,{scale:1},e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"drawCurve",value:function(e,t,r){for(var i=this.ctx,n=this.params.height,o=this.params.scale,a=e.length/this.params.height,s=0;s<n;s++){var l=s*a,u=Math.floor(l),c=Math.ceil(l),f=e[u],h=e[c],p=l-u,d=h-f,m=f,b=d*p+m,_=b*b,v=this.params.height-s,g=Math.round(_*o*255);i.fillStyle="rgba("+g+", "+g+", "+g+", 1)",i.fillRect(-r,v,r,-1)}}},{key:"scale",set:function(e){this.params.scale=e},get:function(){return this.params.scale}}]),t}(m.default));r.default=b},{"../utils/draw-utils":171,"./base-draw":152,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],161:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/inherits"),p=i(h),d=e("./base-draw"),m=i(d),b=e("../utils/draw-utils"),_=function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,{min:0,max:1,scale:1,color:(0,b.getRandomColor)()},e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"executeDraw",value:function(e,t){this.drawCurve(t)}},{key:"drawCurve",value:function(e){var t=e.length,r=this.params.width,i=this.params.height,n=r/t,o=this.params.scale,a=this.ctx;a.fillStyle=this.params.color,a.clearRect(0,0,r,i);for(var s=0,l=0;l<t;l++){var u=l*n+s,c=Math.round(u),f=u+(n-s),h=Math.round(f);if(s=h-f,c!==h){var p=h-c,d=this.getYPosition(e[l]*o);a.fillRect(c,d,p,i-d)}else s-=n}}},{key:"scale",set:function(e){this.params.scale=e},get:function(){return this.params.scale}}]),t}(m.default);r.default=_},{"../utils/draw-utils":171,"./base-draw":152,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],162:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/helpers/classCallCheck"),o=i(n),a=e("babel-runtime/helpers/createClass"),s=i(a),l=function(){function e(){(0,o.default)(this,e),this.views=[],this.add.apply(this,arguments)}return(0,s.default)(e,[{key:"add",value:function(){for(var e=this,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];r.forEach(function(t){e.install(t)})}},{key:"install",value:function(e){this.views.push(e),e.params.isSynchronized=!0,e.synchronizer=this}},{key:"shiftSiblings",value:function(e,t){this.views.forEach(function(r){r!==t&&r.shiftCanvas(e)})}}]),e}();r.default=l},{"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],163:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/inherits"),p=i(h),d=e("./base-draw"),m=i(d),b=e("../utils/draw-utils"),_=function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,{colorScheme:"none",color:(0,b.getRandomColor)()},e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"drawCurve",value:function(e,t,r){var i=this.ctx,n=void 0,o=e[1]/2,a=this.getYPosition(e[0]),s=this.getYPosition(e[0]-o),l=this.getYPosition(e[0]+o),u=void 0,c=void 0,f=void 0;switch(t&&(u=t[1]/2,c=this.getYPosition(t[0]-u),f=this.getYPosition(t[0]+u)),this.params.colorScheme){case"none":i.fillStyle=this.params.color;break;case"hue":n=i.createLinearGradient(-r,0,0,0),t?n.addColorStop(0,"hsl("+(0,b.getHue)(t[2])+", 100%, 50%)"):n.addColorStop(0,"hsl("+(0,b.getHue)(e[2])+", 100%, 50%)"),n.addColorStop(1,"hsl("+(0,b.getHue)(e[2])+", 100%, 50%)"),i.fillStyle=n;break;case"opacity":var h=(0,b.hexToRGB)(this.params.color);n=i.createLinearGradient(-r,0,0,0),t?n.addColorStop(0,"rgba("+h.join(",")+","+t[2]+")"):n.addColorStop(0,"rgba("+h.join(",")+","+e[2]+")"),n.addColorStop(1,"rgba("+h.join(",")+","+e[2]+")"),i.fillStyle=n}i.save(),i.beginPath(),i.moveTo(0,a),i.lineTo(0,l),t&&(i.lineTo(-r,f),i.lineTo(-r,c)),i.lineTo(0,s),i.closePath(),i.fill(),i.restore()}}]),t}(m.default);r.default=_,t.exports=_},{"../utils/draw-utils":171,"./base-draw":152,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],164:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/inherits"),p=i(h),d=e("./base-draw"),m=i(d),b=e("../utils/draw-utils"),_=function(e){function t(e){return(0,s.default)(this,t),(0,f.default)(this,(0,o.default)(t).call(this,{color:(0,b.getRandomColor)()},e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"drawCurve",value:function(e,t,r){var i=this.ctx,n=this.getYPosition(e[0]),o=this.getYPosition(e[1]);if(i.save(),i.fillStyle=this.params.color,i.beginPath(),i.moveTo(0,this.getYPosition(0)),i.lineTo(0,o),t){var a=this.getYPosition(t[0]),s=this.getYPosition(t[1]);i.lineTo(-r,s),i.lineTo(-r,a)}i.lineTo(0,n),i.closePath(),i.fill(),i.restore()}}]),t}(m.default);r.default=_},{"../utils/draw-utils":171,"./base-draw":152,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],165:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/possibleConstructorReturn"),s=i(a),l=e("babel-runtime/helpers/get"),u=i(l),c=e("babel-runtime/helpers/inherits"),f=i(c),h=e("babel-runtime/helpers/classCallCheck"),p=i(h),d=e("babel-runtime/helpers/createClass"),m=i(d),b=e("../core/base-lfo"),_=i(b),v="\nself.addEventListener('message', function process(e) {\n  var blockSize = e.data.blockSize;\n  var bufferSource = e.data.buffer;\n  var buffer = new Float32Array(bufferSource);\n  var length = buffer.length;\n  var index = 0;\n\n  while (index < length) {\n    var copySize = Math.min(length - index, blockSize);\n    var block = buffer.subarray(index, index + copySize);\n    var sendBlock = new Float32Array(block);\n\n    postMessage({\n      command: 'process',\n      index: index,\n      buffer: sendBlock.buffer,\n    }, [sendBlock.buffer]);\n\n    index += copySize;\n  }\n\n  postMessage({\n    command: 'finalize',\n    index: index,\n    buffer: bufferSource,\n  }, [bufferSource]);\n}, false)",g=function(){function e(){(0,p.default)(this,e),this._callback=null}return(0,m.default)(e,[{key:"postMessage",value:function(e){var t=e.blockSize,r=e.buffer,i=new Float32Array(r),n=i.length,o=this,a=0;!function e(){if(a<n){var r=Math.min(n-a,t),s=i.subarray(a,a+r),l=new Float32Array(s);o._send({command:"process",index:a,buffer:l.buffer}),a+=r,setTimeout(e,0)}else o._send({command:"finalize",index:a,buffer:i})}()}},{key:"addListener",value:function(e){this._callback=e}},{key:"_send",value:function(e){this._callback({data:e})}}]),e}(),y=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,p.default)(this,t);var r=(0,s.default)(this,(0,o.default)(t).call(this,{frameSize:512,channel:0,ctx:null,buffer:null,useWorker:!0},e));if(r.buffer=r.params.buffer,r.endTime=0,!(r.params.ctx&&r.params.ctx instanceof AudioContext))throw new Error("Missing audio context parameter (ctx)");if(!(r.params.buffer&&r.params.buffer instanceof AudioBuffer))throw new Error("Missing audio buffer parameter (buffer)");return r.blob=new Blob([v],{type:"text/javascript"}),r.worker=null,r.process=r.process.bind(r),r}return(0,f.default)(t,e),(0,m.default)(t,[{key:"setupStream",value:function(){this.outFrame=null}},{key:"initialize",value:function(){(0,u.default)((0,o.default)(t.prototype),"initialize",this).call(this,{frameSize:this.params.frameSize,frameRate:this.buffer.sampleRate/this.params.frameSize,sourceSampleRate:this.buffer.sampleRate})}},{key:"start",value:function(){this.initialize(),this.reset(),this.params.useWorker?(this.worker=new Worker(window.URL.createObjectURL(this.blob)),this.worker.addEventListener("message",this.process,!1)):(this.worker=new g,this.worker.addListener(this.process)),this.endTime=0;var e=this.buffer.getChannelData(this.params.channel).buffer,t=e;this.params.useWorker&&(t=e.slice(0)),this.worker.postMessage({blockSize:this.streamParams.frameSize,buffer:t},[t])}},{key:"stop",value:function(){this.worker.terminate(),this.worker=null,this.finalize(this.endTime)}},{key:"process",value:function(e){var t=this.streamParams.sourceSampleRate,r=e.data.command,i=e.data.index,n=e.data.buffer,o=i/t;"finalize"===r?this.finalize(o):(this.outFrame=new Float32Array(n),this.time=o,this.output(),this.endTime=this.time+this.outFrame.length/t)}}]),t}(_.default);r.default=y},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],166:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{frameSize:512,channel:0,ctx:null,src:null},e));if(!(r.params.ctx&&r.params.ctx instanceof AudioContext))throw new Error("Missing audio context parameter (ctx)");if(!(r.params.src&&r.params.src instanceof AudioNode))throw new Error("Missing audio source node parameter (src)");return r}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(){var e=this.params.ctx;(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,{frameSize:this.params.frameSize,frameRate:e.sampleRate/this.params.frameSize,sourceSampleRate:e.sampleRate});var r=this.streamParams.frameSize;this.scriptProcessor=e.createScriptProcessor(r,1,1),this.scriptProcessor.onaudioprocess=this.process.bind(this),this.params.src.connect(this.scriptProcessor)}},{key:"start",value:function(){this.initialize(),this.reset(),this.time=0,this.scriptProcessor.connect(this.params.ctx.destination)}},{key:"stop",value:function(){this.finalize(this.time),this.scriptProcessor.disconnect()}},{key:"process",value:function(e){var t=e.inputBuffer.getChannelData(this.params.channel);this.blockDuration||(this.blockDuration=t.length/this.streamParams.sourceSampleRate),this.outFrame=t,this.output(),this.time+=this.blockDuration}}]),t}(_.default);r.default=v},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],167:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{absoluteTime:!1},e));return r.params.ctx||"undefined"!=typeof process||(r.params.ctx=new AudioContext),r._isStarted=!1,r._startTime=void 0,r}return(0,m.default)(t,e),(0,u.default)(t,[{key:"initialize",value:function(){(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,{frameSize:this.params.frameSize,frameRate:this.params.frameRate,sourceSampleRate:this.params.frameRate})}},{key:"start",value:function(){this.initialize(),this.reset();this.params.ctx.currentTime;this._isStarted=!0,this._startTime=void 0,this._lastTime=void 0}},{key:"stop",value:function(){if(this._isStarted&&this._startTime){var e=this.params.ctx.currentTime,t=this.time+(e-this._lastTime);this.finalize(t)}}},{key:"process",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(this._isStarted){var i=this.params.ctx.currentTime;e=!isNaN(parseFloat(e))&&isFinite(e)?e:i,this._startTime||(this._startTime=e),this.params.absoluteTime===!1&&(e-=this._startTime),void 0===t.length&&(t=[t]),this.outFrame.set(t,0),this.time=e,this.metaData=r,this._lastTime=i,this.output()}}}]),t}(_.default);r.default=v,t.exports=v},{"../core/base-lfo":136,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],168:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./audio-in-buffer"),o=i(n),a=e("./audio-in-node"),s=i(a),l=e("./event-in"),u=i(l),c=e("./socket-client"),f=i(c),h=e("./socket-server"),p=i(h);r.default={AudioInBuffer:o.default,AudioInNode:s.default,EventIn:u.default,SocketClient:f.default,SocketServer:p.default}},{"./audio-in-buffer":165,"./audio-in-node":166,"./event-in":167,"./socket-client":169,"./socket-server":170}],169:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/object/get-prototype-of"),o=i(n),a=e("babel-runtime/helpers/classCallCheck"),s=i(a),l=e("babel-runtime/helpers/createClass"),u=i(l),c=e("babel-runtime/helpers/possibleConstructorReturn"),f=i(c),h=e("babel-runtime/helpers/get"),p=i(h),d=e("babel-runtime/helpers/inherits"),m=i(d),b=e("../core/base-lfo"),_=i(b),v=e("../utils/socket-utils"),g=function(e){function t(e){(0,s.default)(this,t);var r=(0,f.default)(this,(0,o.default)(t).call(this,{port:3031,address:window.location.hostname},e));return r.socket=null,r.initConnection(),r}return(0,m.default)(t,e),(0,u.default)(t,[{key:"start",value:function(){this.initialize(),this.reset()}},{key:"initialize",value:function(){(0,p.default)((0,o.default)(t.prototype),"initialize",this).call(this,void 0,{frameSize:this.params.frameSize,frameRate:this.params.frameRate})}},{key:"initConnection",value:function(){var e=this,t="ws://"+this.params.address+":"+this.params.port;this.socket=new WebSocket(t),this.socket.binaryType="arraybuffer",this.socket.onopen=function(){e.start()},this.socket.onclose=function(){},this.socket.onmessage=function(t){e.process(t.data)},this.socket.onerror=function(e){console.error(e)}}},{key:"process",value:function(e){var t=(0,v.decodeMessage)(e);this.time=t.time,this.outFrame=t.frame,this.metaData=t.metaData,this.output()}}]),t}(_.default);r.default=g},{"../core/base-lfo":136,"../utils/socket-utils":173,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],170:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),a=n(o),s=e("babel-runtime/helpers/classCallCheck"),l=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),f=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(f),p=e("babel-runtime/helpers/inherits"),d=n(p),m=e("../core/base-lfo"),b=n(m),_=e("ws"),v=i(_),g=e("../utils/socket-utils"),y=function(e){function t(e){(0,l.default)(this,t);var r=(0,h.default)(this,(0,a.default)(t).call(this,{port:3030},e));return r.clients=[],r.server=null,r.initServer(),r.start(),r}return(0,d.default)(t,e),(0,c.default)(t,[{key:"start",value:function(){this.initialize(),this.reset()}},{key:"initServer",value:function(){var e=this;this.server=new v.Server({port:this.params.port}),this.server.on("connection",function(t){t.on("message",e.process.bind(e))})}},{key:"process",value:function(e){var t=(0,g.bufferToArrayBuffer)(e),r=(0,g.decodeMessage)(t);this.time=r.time,this.outFrame=r.frame,this.metaData=r.metaData,this.output()}}]),t}(b.default);r.default=y},{"../core/base-lfo":136,"../utils/socket-utils":173,"babel-runtime/core-js/object/get-prototype-of":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22,ws:174}],171:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.getRandomColor=function(){for(var e="0123456789ABCDEF".split(""),t="#",r=0;r<6;r++)t+=e[Math.floor(16*Math.random())];return t},r.getHue=function(e){var t=0,r=1,i=270,n=0;return(n-i)*(e-t)/(r-t)+i},r.hexToRGB=function(e){e=e.substring(1,7);var t=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);return[t,r,i]}},{}],172:[function(e,t,r){"use strict";function i(e,t,r){for(var i=0,n=0,o=2*u/t,a=0;a<t;a++){var s=a*o,l=.5-.5*c(s);e[a]=l,i+=l,n+=l*l}r.linear=t/i,r.power=h(t/n)}function n(e,t,r){for(var i=0,n=0,o=2*u/t,a=0;a<t;a++){var s=a*o,l=.54-.46*c(s);e[a]=l,i+=l,n+=l*l}r.linear=t/i,r.power=h(t/n)}function o(e,t,r){for(var i=0,n=0,o=2*u/t,a=0;a<t;a++){var s=a*o,l=.42-.5*c(s)+.08*c(2*s);e[a]=l,i+=l,n+=l*l}r.linear=t/i,r.power=h(t/n)}function a(e,t,r){for(var i=0,n=0,o=.35875,a=.48829,s=.14128,l=.01168,f=2*u/t,p=0;p<t;p++){var d=p*f,m=o-a*c(d)+s*c(2*d);-l*c(3*d),e[p]=m,i+=m,n+=m*m}r.linear=t/i,r.power=h(t/n)}function s(e,t,r){for(var i=0,n=0,o=u/t,a=0;a<t;a++){var s=a*o,l=f(s);e[a]=l,i+=l,n+=l*l}r.linear=t/i,r.power=h(t/n)}function l(e,t,r){for(var i=0;i<t;i++)e[i]=1}Object.defineProperty(r,"__esModule",{value:!0});var u=Math.PI,c=Math.cos,f=Math.sin,h=Math.sqrt;r.default=function(){return function(e,t,r,u){switch(e=e.toLowerCase()){case"hann":case"hanning":i(t,r,u);break;case"hamming":n(t,r,u);break;case"blackman":o(t,r,u);break;case"blackmanharris":a(t,r,u);break;case"sine":s(t,r,u);break;case"rectangle":l(t,r,u)}}}()},{}],173:[function(e,t,r){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){return String.fromCharCode.apply(null,e)}function o(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),i=0,n=e.length;i<n;i++)r[i]=e.charCodeAt(i);return r}function a(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;++i)r[i]=e[i];return t}function s(e){for(var r=new t(e.byteLength),i=new Uint8Array(e),n=0;n<r.length;++n)r[n]=i[n];return r}function l(e,t,r){var i=new Float64Array(1);i[0]=e;var n=new Uint16Array(i.buffer),a=new Uint16Array(1);a[0]=t.length;var s=new Uint16Array(t.buffer),l=o((0,f.default)(r)),u=n.length+a.length+s.length+l.length,c=new Uint16Array(u);return c.set(n,0),c.set(a,n.length),c.set(s,n.length+a.length),c.set(l,n.length+a.length+s.length),c.buffer}function u(e){var t=new Float64Array(e.slice(0,8)),r=t[0],i=new Uint16Array(e.slice(8,10)),o=i[0],a=4*o,s=new Float32Array(e.slice(10,10+a)),l=new Uint16Array(e.slice(10+a)),u=n(l);return u=JSON.parse(u.replace(/\u0000/g,"")),{time:r,frame:s,metaData:u}}Object.defineProperty(r,"__esModule",{value:!0});var c=e("babel-runtime/core-js/json/stringify"),f=i(c);r.bufferToArrayBuffer=a,r.arrayBufferToBuffer=s,r.encodeMessage=l,r.decodeMessage=u}).call(this,e("buffer").Buffer)},{"babel-runtime/core-js/json/stringify":7,buffer:25}],174:[function(e,t,r){function i(e,t,r){var i;return i=t?new o(e,t):new o(e)}var n=function(){return this}(),o=n.WebSocket||n.MozWebSocket;t.exports=o?i:null,o&&(i.prototype=o.prototype)},{}],175:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/json/stringify"),a=n(o),s=e("babel-runtime/helpers/classCallCheck"),l=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),f=e("../utils/gmm-utils"),h=i(f),p=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];(0,l.default)(this,e),this._model=void 0,this._modelResults=void 0,this._likelihoodWindow=t}return(0,c.default)(e,[{key:"filter",value:function(e,t){var r=null,i=null;if(void 0===this._model)return void console.log("no model loaded");try{h.gmmFilter(e,this._model,this._modelResults);var n=this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown",o=this._modelResults.smoothed_normalized_likelihoods.slice(0);i={likeliest:n,likeliestIndex:this._modelResults.likeliest,likelihoods:o},this._model.shared_parameters.bimodal&&(i.outputValues=this._modelResults.output_values.slice(0),i.outputCovariance=this.modelResults.output_covariance.slice(0))}catch(e){r="problem occured during filtering : "+e}t(r,i)}},{key:"_setModel",value:function(e){if(this._model=void 0,this._modelResults=void 0,void 0!==e.models){this._model=e;var t=this._model,r=t.models.length;this._modelResults={instant_likelihoods:new Array(r),smoothed_log_likelihoods:new Array(r),smoothed_likelihoods:new Array(r),instant_normalized_likelihoods:new Array(r),smoothed_normalized_likelihoods:new Array(r),likeliest:-1,singleClassGmmModelResults:[]};var i=t.shared_parameters,n=i.dimension-i.dimension_input;this._modelResults.output_values=new Array(n);for(var o=0;o<n;o++)this._modelResults.output_values[o]=0;var a=void 0;a=0==t.configuration.default_parameters.covariance_mode?n*n:n,this._modelResults.output_covariance=new Array(a);for(var s=0;s<n;s++)this._modelResults.output_covariance[s]=0;for(var l=0;l<r;l++){this._modelResults.instant_likelihoods[l]=0,this._modelResults.smoothed_log_likelihoods[l]=0,this._modelResults.smoothed_likelihoods[l]=0,this._modelResults.instant_normalized_likelihoods[l]=0,this._modelResults.smoothed_normalized_likelihoods[l]=0;var u={instant_likelihood:0,log_likelihood:0};u.likelihood_buffer=new Array(this._likelihoodWindow);for(var c=0;c<this._likelihoodWindow;c++)u.likelihood_buffer[c]=1/this._likelihoodWindow;u.likelihood_buffer_index=0,u.beta=new Array(t.models[l].components.length);for(var f=0;f<u.beta.length;f++)u.beta[f]=1/u.beta.length;u.output_values=this._modelResults.output_values.slice(0),u.output_covariance=this._modelResults.output_covariance.slice(0),this._modelResults.singleClassGmmModelResults.push(u)}}}},{key:"likelihoodWindow",get:function(){return this._likelihoodWindow},set:function(e){if(this._likelihoodWindow=e,void 0!==this._model)for(var t=this._modelResults.singleClassModelResults,r=0;r<this._model.models.length;r++){t[r].likelihood_buffer=new Array(this._likelihoodWindow);for(var i=0;i<this._likelihoodWindow;i++)t.likelihood_buffer[i]=1/this._likelihoodWindow}}},{key:"model",get:function(){if(void 0!==this._model)return JSON.fromString((0,a.default)(this._model))},set:function(e){this._setModel(e)}},{key:"likeliestLabel",get:function(){return void 0!==this._modelResults&&this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown"}},{key:"nbClasses",get:function(){return void 0!==this._model?this._model.models.length:0}}]),e}();r.default=p},{"../utils/gmm-utils":179,"babel-runtime/core-js/json/stringify":7,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],176:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/json/stringify"),a=n(o),s=e("babel-runtime/helpers/classCallCheck"),l=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),f=e("../utils/hhmm-utils"),h=i(f),p=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];(0,l.default)(this,e),this._likelihoodWindow=t,this._model=void 0,this._modelResults=void 0}return(0,c.default)(e,[{key:"filter",value:function(e,t){var r=null,i=null;if(void 0===this._model)r="no model loaded yet";else try{h.hhmmFilter(e,this._model,this._modelResults);var n=this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown",o=this._modelResults.smoothed_normalized_likelihoods.slice(0);i={likeliest:n,likeliestIndex:this._modelResults.likeliest,likelihoods:o,timeProgressions:new Array(this._model.models.length),alphas:new Array(this._model.models.length)};for(var a=0;a<this._model.models.length;a++)i.timeProgressions[a]=this._modelResults.singleClassHmmModelResults[a].progress,this._model.configuration.default_parameters.hierarchical?i.alphas[a]=this._modelResults.singleClassHmmModelResults[a].alpha_h[0]:i.alphas[a]=this._modelResults.singleClassHmmModelResults[a].alpha[0];this._model.shared_parameters.bimodal&&(i.outputValues=this._modelResults.output_values.slice(0),i.outputCovariance=this._modelResults.output_covariance.slice(0))}catch(e){r="problem occured during filtering : "+e}t(r,i)}},{key:"reset",value:function(){void 0!==this._model&&this._setModel(this._model)}},{key:"_setModel",value:function(e){if(this._model=void 0,this._modelResults=void 0,void 0!==e.models){this._model=e;var t=this._model,r=t.models.length;this._modelResults={instant_likelihoods:new Array(r),smoothed_log_likelihoods:new Array(r),smoothed_likelihoods:new Array(r),instant_normalized_likelihoods:new Array(r),smoothed_normalized_likelihoods:new Array(r),likeliest:-1,frontier_v1:new Array(r),frontier_v2:new Array(r),forward_initialized:!1,singleClassHmmModelResults:[]};var i=t.shared_parameters,n=i.dimension-i.dimension_input;this._modelResults.output_values=new Array(n);for(var o=0;o<n;o++)this._modelResults.output_values[o]=0;var a=void 0;a=0==t.configuration.default_parameters.covariance_mode?n*n:n,this._modelResults.output_covariance=new Array(a);for(var s=0;s<n;s++)this._modelResults.output_covariance[s]=0;for(var l=0;l<r;l++){this._modelResults.instant_likelihoods[l]=0,this._modelResults.smoothed_log_likelihoods[l]=0,this._modelResults.smoothed_likelihoods[l]=0,this._modelResults.instant_normalized_likelihoods[l]=0,this._modelResults.smoothed_normalized_likelihoods[l]=0;for(var u=t.models[l].parameters.states,c=new Array(3),f=0;f<3;f++){c[f]=new Array(u);for(var h=0;h<u;h++)c[f][h]=0}for(var p=new Array(u),d=0;d<u;d++)p[d]=0;for(var m=new Array(this._likelihoodWindow),b=0;b<this._likelihoodWindow;b++)m[b]=0;var _={hierarchical:t.configuration.default_parameters.hierarchical,instant_likelihood:0,log_likelihood:0,likelihood_buffer:m,likelihood_buffer_index:0,progress:0,exit_likelihood:0,exit_ratio:0,likeliest_state:-1,previous_alpha:p.slice(0),alpha:p,alpha_h:c,prior:new Array(u),transition:new Array(u),window_minindex:0,window_maxindex:0,window_normalization_constant:0,forward_initialized:!1,singleClassGmmModelResults:[]};_.output_values=this._modelResults.output_values.slice(0),_.output_covariance=this._modelResults.output_covariance.slice(0);for(var v=0;v<u;v++){var g={instant_likelihood:0,log_likelihood:0};g.beta=new Array(this._model.models[l].parameters.gaussians);for(var y=0;y<g.beta.length;y++)g.beta[y]=1/g.beta.length;g.output_values=_.output_values.slice(0),g.output_covariance=_.output_covariance.slice(0),_.singleClassGmmModelResults.push(g)}this._modelResults.singleClassHmmModelResults.push(_)}}}},{key:"likelihoodWindow",get:function(){return this._likelihoodWindow},set:function(e){if(this._likelihoodWindow=e,void 0!==this._model)for(var t=this._modelResults.singleClassModelResults,r=0;r<this._model.models.length;r++){t[r].likelihood_buffer=new Array(this._likelihoodWindow);for(var i=0;i<this._likelihoodWindow;i++)t.likelihood_buffer[i]=1/this._likelihoodWindow}}},{key:"model",get:function(){if(void 0!==this._model)return JSON.fromString((0,a.default)(this._model))},set:function(e){this._setModel(e)}},{key:"likeliestLabel",get:function(){return void 0!==this._modelResults&&this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown"}},{key:"nbClasses",get:function(){return void 0!==this._model?this._model.models.length:0}}]),e}();r.default=p},{"../utils/hhmm-utils":180,"babel-runtime/core-js/json/stringify":7,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],177:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{
value:!0});var n=e("./gmm/gmm-decoder");Object.defineProperty(r,"GmmDecoder",{enumerable:!0,get:function(){return i(n).default}});var o=e("./hhmm/hhmm-decoder");Object.defineProperty(r,"HhmmDecoder",{enumerable:!0,get:function(){return i(o).default}});var a=e("./phrase/xmm-phrase");Object.defineProperty(r,"PhraseMaker",{enumerable:!0,get:function(){return i(a).default}})},{"./gmm/gmm-decoder":175,"./hhmm/hhmm-decoder":176,"./phrase/xmm-phrase":178}],178:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/core-js/number/is-integer"),o=i(n),a=e("babel-runtime/core-js/object/assign"),s=i(a),l=e("babel-runtime/helpers/classCallCheck"),u=i(l),c=e("babel-runtime/helpers/createClass"),f=i(c),h=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,u.default)(this,e);var r={bimodal:!1,dimension:1,dimension_input:0,column_names:[""],label:""};(0,s.default)(r,t),this._config={},this._setConfig(t),this.reset()}return(0,f.default)(e,[{key:"addObservation",value:function(e){if(e.length!==this._config.dimension||"number"==typeof e&&1!==this._config.dimension)throw console.error("error : incoming observation length not matching with dimensions"),"BadVectorSizeException";this._config.bimodal?(this._data_in=this._data_in.concat(e.slice(0,this._config.dimension_input)),this._data_out=this._data_out.concat(e.slice(this._config.dimension_input))):Array.isArray(e)?this._data=this._data.concat(e):this._data.push(e)}},{key:"reset",value:function(){this._data=[],this._data_in=[],this._data_out=[]}},{key:"_setConfig",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];for(var t in e)"bimodal"===t&&"boolean"==typeof e[t]?this._config[t]=e[t]:"dimension"===t&&(0,o.default)(e[t])?this._config[t]=e[t]:"dimension_input"===t&&(0,o.default)(e[t])?this._config[t]=e[t]:"column_names"===t&&Array.isArray(e[t])?this._config[t]=e[t].slice(0):"label"===t&&"string"==typeof e[t]&&(this._config[t]=e[t])}},{key:"config",get:function(){return this._config},set:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._setConfig(e)}},{key:"phrase",get:function(){return{bimodal:this._config.bimodal,column_names:this._config.column_names,dimension:this._config.dimension,dimension_input:this._config.dimension_input,label:this._config.label,data:this._data.slice(0),data_input:this._data_in.slice(0),data_output:this._data_out.slice(0),length:this._config.bimodal?this._data_in.length/this._config.dimension_input:this._data.length/this._config.dimension}}}]),e}();r.default=h},{"babel-runtime/core-js/number/is-integer":8,"babel-runtime/core-js/object/assign":9,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],179:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=r.gmmComponentRegression=function(e,t,r){var i=r.dimension,n=r.dimension_input,o=i-n;if(t=new Array(o),0===r.covariance_mode)for(var a=0;a<o;a++){t[a]=r.mean[n+a];for(var s=0;s<n;s++){for(var l=0,u=0;u<n;u++)l+=r.inverse_covariance_input[s*n+u]*(e[u]-r.mean[u]);t[a]+=r.covariance[(a+n)*i+s]*l}}else for(var c=0;c<o;c++)t[c]=r.covariance[c+n]},n=r.gmmComponentLikelihood=function(e,t){var r=0;if(0===t.covariance_mode)for(var i=0;i<t.dimension;i++){for(var n=0,o=0;o<t.dimension;o++)n+=t.inverse_covariance[i*t.dimension+o]*(e[o]-t.mean[o]);r+=(e[i]-t.mean[i])*n}else for(var a=0;a<t.dimension;a++)r+=t.inverse_covariance[a]*(e[a]-t.mean[a])*(e[a]-t.mean[a]);var s=Math.exp(-.5*r)/Math.sqrt(t.covariance_determinant*Math.pow(2*Math.PI,t.dimension));return(s<1e-180||isNaN(s)||isNaN(Math.abs(s)))&&(s=1e-180),s},o=r.gmmComponentLikelihoodInput=function(e,t){var r=0;if(0===t.covariance_mode)for(var i=0;i<t.dimension_input;i++){for(var n=0,o=0;o<t.dimension_input;o++)n+=t.inverse_covariance_input[i*t.dimension_input+o]*(e[o]-t.mean[o]);r+=(e[i]-t.mean[i])*n}else for(var a=0;a<t.dimension_input;a++)r+=t.inverse_covariance_input[a]*(e[a]-t.mean[a])*(e[a]-t.mean[a]);var s=Math.exp(-.5*r)/Math.sqrt(t.covariance_determinant_input*Math.pow(2*Math.PI,t.dimension_input));return(s<1e-180||isNaN(s)||isNaN(Math.abs(s)))&&(s=1e-180),s},a=r.gmmComponentLikelihoodBimodal=function(e,t,r){var i=r.dimension,n=r.dimension_input,o=i-n,a=0;if(0===r.covariance_mode)for(var s=0;s<i;s++){for(var l=0,u=0;u<r.dimension_input;u++)l+=r.inverse_covariance[s*i+u]*(e[u]-r.mean[u]);for(var c=0;c<o;c++)l+=r.inverse_covariance[s*i+n+c]*(t[c]-r.mean[n+c]);a+=s<n?(e[s]-r.mean[s])*l:(t[s-n]-r.mean[s])*l}else{for(var f=0;f<n;f++)a+=r.inverse_covariance[f]*(e[f]-r.mean[f])*(e[f]-r.mean[f]);for(var h=r.dimension_input;h<r.dimension;h++){var p=(t[h-n]-r.mean[h])*(t[h-n]-r.mean[h]);a+=r.inverse_covariance[h]*p}}var d=Math.exp(-.5*a)/Math.sqrt(r.covariance_determinant*Math.pow(2*Math.PI,r.dimension));return(d<1e-180||isNaN(d)||isNaN(Math.abs(d)))&&(d=1e-180),d},s=(r.gmmRegression=function(e,t,r){var n=t.components[0].dimension,o=t.components[0].dimension_input,a=n-o;r.output_values=new Array(a);for(var s=0;s<a;s++)r.output_values[s]=0;var l=void 0;l=0===t.parameters.covariance_mode?a*a:a,r.output_covariance=new Array(l);for(var u=0;u<l;u++)r.output_covariance[u]=0;for(var c=void 0,f=0;f<t.components.length;f++){i(e,c,t.components[f]);for(var h=r.beta[f]*r.beta[f],p=0;p<a;p++)if(r.output_values[p]+=r.beta[f]*c[p],0===t.parameters.covariance_mode)for(var d=0;d<a;d++){var m=p*a+d;r.output_covariance[m]+=h*t.components[f].output_covariance[m]}else r.output_covariance[p]+=h*t.components[f].output_covariance[p]}},r.gmmObsProb=function e(t,r){var i=arguments.length<=2||void 0===arguments[2]?-1:arguments[2],o=r.mixture_coeffs,a=r.components,s=0;if(i<0)for(var l=0;l<a.length;l++)s+=e(t,r,l);else s=o[i]*n(t,a[i]);return s}),l=r.gmmObsProbInput=function e(t,r){var i=arguments.length<=2||void 0===arguments[2]?-1:arguments[2],n=r.mixture_coeffs,a=r.components,s=0;if(i<0)for(var l=0;l<a.length;l++)s+=e(t,r,l);else s=n[i]*o(t,a[i]);return s},u=r.gmmObsProbBimodal=function e(t,r,i){var n=arguments.length<=3||void 0===arguments[3]?-1:arguments[3],o=i.mixture_coeffs,s=i.components,l=0;if(n<0)for(var u=0;u<s.length;u++)l+=e(t,r,i,u);else l=o[n]*a(t,r,s[n]);return l},c=r.gmmLikelihood=function(e,t,r){for(var i=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],n=t.mixture_coeffs,o=t.components,a=r,c=0,f=0;f<o.length;f++)singleClassGmmModel.components[f].bimodal?0===i.length?a.beta[f]=l(e,t,f):a.beta[f]=u(e,i,t,f):a.beta[f]=s(e,t,f),c+=a.beta[f];for(var h=0;h<n.length;h++)a.beta[h]/=c;return a.instant_likelihood=c,a.likelihood_buffer[a.likelihood_buffer_index]=c,a.likelihood_buffer_index=(a.likelihood_buffer_index+1)%a.likelihood_buffer.length,a.log_likelihood=a.likelihood_buffer.reduce(function(e,t){return e+t},0),a.log_likelihood/=a.likelihood_buffer.length,c};r.gmmFilter=function(e,t,r){for(var i=t.models,n=r,o=0,a=0,s=0,l=0;l<i.length;l++){var u=n.singleClassGmmModelResults[l];n.instant_likelihoods[l]=c(e,i[l],u),n.smoothed_log_likelihoods[l]=u.log_likelihood,n.smoothed_likelihoods[l]=Math.exp(n.smoothed_log_likelihoods[l]),n.instant_normalized_likelihoods[l]=n.instant_likelihoods[l],n.smoothed_normalized_likelihoods[l]=n.smoothed_likelihoods[l],a+=n.instant_normalized_likelihoods[l],s+=n.smoothed_normalized_likelihoods[l],(0==l||n.smoothed_log_likelihoods[l]>o)&&(o=n.smoothed_log_likelihoods[l],n.likeliest=l)}for(var f=0;f<i.length;f++)n.instant_normalized_likelihoods[f]/=a,n.smoothed_normalized_likelihoods[f]/=s;var h=t.shared_parameters,p=t.configuration;if(h.bimodal){var d=h.dimension,m=h.dimension_input,b=d-m;if(0===p.multiClass_regression_estimator)n.output_values=n.singleClassModelResults[n.likeliest].output_values,n.output_covariance=n.singleClassModelResults[n.likeliest].output_covariance;else{n.output_values=new Array(b);for(var _=0;_<b;_++)n.output_values[_]=0;var v=void 0;v=0==p.default_parameters.covariance_mode?b*b:b,n.output_covariance=new Array(v);for(var g=0;g<v;g++)n.output_covariance[g]=0;for(var y=0;y<i.length;y++)for(var w=n.smoothed_normalized_likelihoods[y],k=n.singleClassGmmModelResults[y],j=0;j<b;y++)if(n.output_values[j]+=w*k.output_values[j],0===p.default_parameters.covariance_mode)for(var C=0;C<b;C++){var x=j*b+C;n.output_covariance[x]+=w*k.output_covariance[x]}else n.output_covariance[j]+=w*k.output_covariance[j]}}}},{}],180:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(r,"__esModule",{value:!0}),r.hhmmFilter=r.hhmmUpdateResults=r.hhmmForwardUpdate=r.hhmmForwardInit=r.hhmmLikelihoodAlpha=r.hmmFilter=r.hmmUpdateResults=r.hmmUpdateAlphaWindow=r.hmmForwardUpdate=r.hmmForwardInit=r.hmmRegression=void 0;var n=e("./gmm-utils"),o=i(n),a=r.hmmRegression=function(e,t,r){var i=t.states[0].components[0].dimension,n=t.states[0].components[0].dimension_input,a=i-n,s=void 0;s=0===t.states[0].components[0].covariance_mode?a*a:a,r.output_values=new Array(a);for(var l=0;l<a;l++)r.output_values[l]=0;r.output_covariance=new Array(s);for(var u=0;u<s;u++)r.output_covariance[u]=0;if(2===t.parameters.regression_estimator)return o.gmmLikelihood(e,t.states[r.likeliest_state],r.singleClassGmmModelResults[r.likeliest_state]),o.gmmRegression(e,t.states[r.likeliest_state],r.singleClassGmmModelResults[r.likeliest_state]),void(r.output_values=t.states[r.likeliest_state].output_values.slice(0));var c=0==t.parameters.regression_estimator?0:r.window_minindex,f=0==t.parameters.regression_estimator?t.states.length:r.window_maxindex,h=0==t.parameters.regression_estimator?1:r.window_normalization_constant;h<=0&&(h=1);for(var p=c;p<f;p++){o.gmmLikelihood(e,t.states[p],r.singleClassGmmModelResults[p]),o.gmmRegression(e,t.states[p],r.singleClassGmmModelResults[p]);for(var d=r.singleClassGmmModelResults[p].output_values.slice(0),m=0;m<a;m++)if(r.hierarchical)if(r.output_values[m]+=(r.alpha_h[0][p]+r.alpha_h[1][p])*d[m]/h,0===t.parameters.covariance_mode)for(var b=0;b<a;b++)r.output_covariance[m*a+b]+=(r.alpha_h[0][p]+r.alpha_h[1][p])*(r.alpha_h[0][p]+r.alpha_h[1][p])*r.singleClassGmmModelResults[p].output_covariance[m*a+b]/h;else r.output_covariance[m]+=(r.alpha_h[0][p]+r.alpha_h[1][p])*(r.alpha_h[0][p]+r.alpha_h[1][p])*r.singleClassGmmModelResults[p].output_covariance[m]/h;else if(r.output_values[m]+=r.alpha[p]*d[m]/h,0===t.parameters.covariance_mode)for(var _=0;_<a;_++)r.output_covariance[m*a+_]+=r.alpha[p]*r.alpha[p]*r.singleClassGmmModelResults[p].output_covariance[m*a+_]/h;else r.output_covariance[m]+=r.alpha[p]*r.alpha[p]*r.singleClassGmmModelResults.output_covariance[m]/h}},s=r.hmmForwardInit=function(e,t,r){var i=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],n=t.parameters.states,a=0;if(0===t.parameters.transition_mode)for(var s=0;s<n;s++)t.states[s].components[0].bimodal?i.length>0?r.alpha[s]=t.prior[s]*o.gmmObsProbBimodal(e,i,t.states[s]):r.alpha[s]=t.prior[s]*o.gmmObsProbInput(e,t.states[s]):r.alpha[s]=t.prior[s]*o.gmmObsProb(e,t.states[s]),a+=r.alpha[s];else{for(var l=0;l<r.alpha.length;l++)r.alpha[l]=0;t.states[0].components[0].bimodal?i.length>0?r.alpha[0]=o.gmmObsProbBimodal(e,i,t.states[0]):r.alpha[0]=o.gmmObsProbInput(e,t.states[0]):r.alpha[0]=o.gmmObsProb(e,t.states[0]),a+=r.alpha[0]}if(a>0){for(var u=0;u<n;u++)r.alpha[u]/=a;return 1/a}for(var c=0;c<n;c++)r.alpha[c]=1/n;return 1},l=r.hmmForwardUpdate=function(e,t,r){var i=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],n=t.parameters.states,a=0;r.previous_alpha=r.alpha.slice(0);for(var s=0;s<n;s++){if(r.alpha[s]=0,0===t.parameters.transition_mode)for(var l=0;l<n;l++)r.alpha[s]+=r.previous_alpha[l]*r.transition[l*n+s];else r.alpha[s]+=r.previous_alpha[s]*r.transition[2*s],s>0?r.alpha[s]+=r.previous_alpha[s-1]*r.transition[2*(s-1)+1]:r.alpha[0]+=r.previous_alpha[n-1]*r.transition[2*n-1];t.states[s].components[0].bimodal?i.length>0?r.alpha[s]*=o.gmmObsProbBimodal(e,i,t.states[s]):r.alpha[s]*=o.gmmObsProbInput(e,t.states[s]):r.alpha[s]*=o.gmmObsProb(e,t.states[s]),a+=r.alpha[s]}if(a>1e-300){for(var u=0;u<n;u++)r.alpha[u]/=a;return 1/a}return 0},u=r.hmmUpdateAlphaWindow=function(e,t){var r=e.parameters.states;t.likeliest_state=0;var i=void 0;i=e.parameters.hierarchical?t.alpha_h[0][0]+t.alpha_h[1][0]:t.alpha[0];for(var n=1;n<r;n++)e.parameters.hierarchical?t.alpha_h[0][n]+t.alpha_h[1][n]>i&&(i=t.alpha_h[0][n]+t.alpha_h[1][n],t.likeliest_state=n):t.alpha[n]>i&&(i=t.alpha[0],t.likeliest_state=n);t.window_minindex=t.likeliest_state-r/2,t.window_maxindex=t.likeliest_state+r/2,t.window_minindex=t.window_minindex>=0?t.window_minindex:0,t.window_maxindex=t.window_maxindex<=r?t.window_maxindex:r,t.window_normalization_constant=0;for(var o=t.window_minindex;o<t.window_maxindex;o++)t.window_normalization_constant+=t.alpha_h[0][o]+t.alpha_h[1][o]},c=r.hmmUpdateResults=function(e,t){t.likelihood_buffer[t.likelihood_buffer_index]=Math.log(t.instant_likelihood),t.likelihood_buffer_index=(t.likelihood_buffer_index+1)%t.likelihood_buffer.length,t.log_likelihood=0;for(var r=t.likelihood_buffer.length,i=0;i<r;i++)t.log_likelihood+=t.likelihood_buffer[i];t.log_likelihood/=r,t.progress=0;for(var n=t.window_minindex;n<t.window_maxindex;n++)e.parameters.hierarchical?t.progress+=(t.alpha_h[0][n]+t.alpha_h[1][n]+t.alpha_h[2][n])*n/t.window_normalization_constant:t.progress+=t.alpha[n]*n/t.window_normalization_constant;t.progress/=e.parameters.states-1},f=r.hmmFilter=function(e,t,r){var i=0;if(r.forward_initialized)i=l(e,t,r);else{for(var n=0;n<r.likelihood_buffer.length;n++)r.likelihood_buffer[n]=0;i=s(e,t,r),r.forward_initialized=!0}return r.instant_likelihood=1/i,u(t,r),c(t,r),t.states[0].components[0].bimodal&&a(e,t,r),r.instant_likelihood},h=r.hhmmLikelihoodAlpha=function(e,t,r,i){if(e<0)for(var n=0;n<r.models.length;n++){t[n]=0;for(var o=0;o<3;o++)for(var a=0;a<r.models[n].parameters.states;a++)t[n]+=i.singleClassHmmModelResults[n].alpha_h[o][a]}else for(var s=0;s<r.models.length;s++){t[s]=0;for(var l=0;l<r.models[s].parameters.states;l++)t[s]+=i.singleClassHmmModelResults[s].alpha_h[e][l]}},p=r.hhmmForwardInit=function(e,t,r){for(var i=0,n=0;n<t.models.length;n++){for(var a=t.models[n],s=a.parameters.states,l=r.singleClassHmmModelResults[n],u=0;u<3;u++){l.alpha_h[u]=new Array(s);for(var c=0;c<s;c++)l.alpha_h[u][c]=0}if(0==a.parameters.transition_mode)for(var f=0;f<s;f++)t.shared_parameters.bimodal?l.alpha_h[0][f]=a.prior[f]*o.gmmObsProbInput(e,a.states[f]):l.alpha_h[0][f]=a.prior[f]*o.gmmObsProb(e,a.states[f]),l.instant_likelihood+=l.alpha_h[0][f];else l.alpha_h[0][0]=t.prior[n],t.shared_parameters.bimodal?l.alpha_h[0][0]*=o.gmmObsProbInput(e,a.states[0]):l.alpha_h[0][0]*=o.gmmObsProb(e,a.states[0]),l.instant_likelihood=l.alpha_h[0][0];i+=l.instant_likelihood}for(var h=0;h<t.models.length;h++)for(var p=t.models[h].parameters.states,d=0;d<3;d++)for(var m=0;m<p;m++)r.singleClassHmmModelResults[h].alpha_h[d][m]/=i;r.forward_initialized=!0},d=r.hhmmForwardUpdate=function(e,t,r){var i=t.models.length,n=0,a=0,s=void 0;h(1,r.frontier_v1,t,r),h(2,r.frontier_v2,t,r);for(var l=0;l<i;l++){var u=t.models[l],c=u.parameters.states,f=r.singleClassHmmModelResults[l];s=new Array(c);for(var p=0;p<c;p++)s[p]=0;if(0==u.parameters.transition_mode)for(var d=0;d<c;d++){for(var m=0;m<c;m++)s[d]+=u.transition[m*c+d]/(1-u.exitProbabilities[m])*f.alpha_h[0][m];for(var b=0;b<i;b++)s[d]+=u.prior[d]*(r.frontier_v1[b]*t.transition[b][l]+r.frontier_v2[b]*t.prior[l])}else{s[0]=u.transition[0]*f.alpha_h[0][0];for(var _=0;_<i;_++)s[0]+=r.frontier_v1[_]*t.transition[_][l]+r.frontier_v2[_]*t.prior[l];for(var v=1;v<c;v++)s[v]+=u.transition[2*v]/(1-u.exitProbabilities[v])*f.alpha_h[0][v],s[v]+=u.transition[2*(v-1)+1]/(1-u.exitProbabilities[v-1])*f.alpha_h[0][v-1];for(var g=0;g<3;g++)for(var y=0;y<c;y++)f.alpha_h[g][y]=0}f.exit_likelihood=0,f.instant_likelihood=0;for(var w=0;w<c;w++)a=t.shared_parameters.bimodal?o.gmmObsProbInput(e,u.states[w])*s[w]:o.gmmObsProb(e,u.states[w])*s[w],f.alpha_h[2][w]=t.exit_transition[l]*u.exitProbabilities[w]*a,f.alpha_h[1][w]=(1-t.exit_transition[l])*u.exitProbabilities[w]*a,f.alpha_h[0][w]=(1-u.exitProbabilities[w])*a,f.exit_likelihood+=f.alpha_h[1][w]+f.alpha_h[2][w],f.instant_likelihood+=f.alpha_h[0][w]+f.alpha_h[1][w]+f.alpha_h[2][w],n+=a;f.exit_ratio=f.exit_likelihood/f.instant_likelihood}for(var k=0;k<i;k++)for(var j=0;j<3;j++)for(var C=0;C<t.models[k].parameters.states;C++)r.singleClassHmmModelResults[k].alpha_h[j][C]/=n},m=r.hhmmUpdateResults=function(e,t){for(var r=0,i=0,n=0,o=0;o<e.models.length;o++){var a=t.singleClassHmmModelResults[o];t.instant_likelihoods[o]=a.instant_likelihood,t.smoothed_log_likelihoods[o]=a.log_likelihood,t.smoothed_likelihoods[o]=Math.exp(t.smoothed_log_likelihoods[o]),t.instant_normalized_likelihoods[o]=t.instant_likelihoods[o],t.smoothed_normalized_likelihoods[o]=t.smoothed_likelihoods[o],i+=t.instant_normalized_likelihoods[o],n+=t.smoothed_normalized_likelihoods[o],(0==o||t.smoothed_log_likelihoods[o]>r)&&(r=t.smoothed_log_likelihoods[o],t.likeliest=o)}for(var s=0;s<e.models.length;s++)t.instant_normalized_likelihoods[s]/=i,t.smoothed_normalized_likelihoods[s]/=n};r.hhmmFilter=function(e,t,r){if(t.configuration.default_parameters.hierarchical)r.forward_initialized?d(e,t,r):p(e,t,r);else for(var i=0;i<t.models.length;i++)r.instant_likelihoods[i]=f(e,t,r);for(var n=0;n<t.models.length;n++)u(t.models[n],r.singleClassHmmModelResults[n]),c(t.models[n],r.singleClassHmmModelResults[n]);if(m(t,r),t.shared_parameters.bimodal){for(var o=t.shared_parameters.dimension,s=t.shared_parameters.dimension_input,l=o-s,h=0;h<t.models.length;h++)a(e,t.models[h],r.singleClassHmmModelResults[h]);if(0===t.configuration.multiClass_regression_estimator)r.output_values=r.singleClassHmmModelResults[r.likeliest].output_values.slice(0),r.output_covariance=r.singleClassHmmModelResults[r.likeliest].output_covariance.slice(0);else{for(var b=0;b<r.output_values.length;b++)r.output_values[b]=0;for(var _=0;_<r.output_covariance.length;_++)r.output_covariance[_]=0;for(var v=0;v<t.models.length;v++)for(var g=0;g<l;g++)if(r.output_values[g]+=r.smoothed_normalized_likelihoods[v]*r.singleClassHmmModelResults[v].output_values[g],0===t.configuration.covariance_mode)for(var y=0;y<l;y++)r.output_covariance[g*l+y]+=r.smoothed_normalized_likelihoods[v]*r.singleClassHmmModelResults[v].output_covariance[g*l+y];else r.output_covariance[g]+=r.smoothed_normalized_likelihoods[v]*r.singleClassHmmModelResults[v].output_covariance[g]}}}},{"./gmm-utils":179}]},{},[4])(4)});